<!DOCTYPE html>
<html lang="en-us" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='All figures in this blog are embedded by Github Image Hosting Service. These figures may not be displayed on mobile devices.
All operations in this series of blogs (Linux Operation System) are done in AWS Elastic Compute Cloud (EC2).
This blog contains lots of gif figures (especially in chapter &amp;ldquo;Vim&amp;rdquo;), please wait a moment to load them.
 Pipe and Redirection | pipe Every command or program we run in Linux has three data streams connected to it:'><title>Linux Operation System III (File System 2)</title>

<link rel='canonical' href='https://wanghaoming177.netlify.app/p/linux-operation-system-iii-file-system-2/'>

<link rel="stylesheet" href="/scss/style.min.6cb794b99473add9625fc6fcb4fd8782c21b06365b632b8fbb1076efe11c688e.css"><meta property='og:title' content='Linux Operation System III (File System 2)'>
<meta property='og:description' content='All figures in this blog are embedded by Github Image Hosting Service. These figures may not be displayed on mobile devices.
All operations in this series of blogs (Linux Operation System) are done in AWS Elastic Compute Cloud (EC2).
This blog contains lots of gif figures (especially in chapter &amp;ldquo;Vim&amp;rdquo;), please wait a moment to load them.
 Pipe and Redirection | pipe Every command or program we run in Linux has three data streams connected to it:'>
<meta property='og:url' content='https://wanghaoming177.netlify.app/p/linux-operation-system-iii-file-system-2/'>
<meta property='og:site_name' content='Haoming Wang'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:published_time' content='2021-05-01T00:00:00&#43;00:00'/><meta property='article:modified_time' content='2021-05-01T00:00:00&#43;00:00'/>
<meta name="twitter:title" content="Linux Operation System III (File System 2)">
<meta name="twitter:description" content="All figures in this blog are embedded by Github Image Hosting Service. These figures may not be displayed on mobile devices.
All operations in this series of blogs (Linux Operation System) are done in AWS Elastic Compute Cloud (EC2).
This blog contains lots of gif figures (especially in chapter &amp;ldquo;Vim&amp;rdquo;), please wait a moment to load them.
 Pipe and Redirection | pipe Every command or program we run in Linux has three data streams connected to it:">
    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            localStorage.setItem(colorSchemeKey, "dark");
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="Toggle Menu">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/IMG_0770_hu86b91b9497cdda82d5c488540c7342b2_101927_300x0_resize_q75_box.jpg" width="300"
                            height="273" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">üåè</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">Haoming Wang</a></h1>
            <h2 class="site-description">We choose to go to the moon in this decade and do the other things, not because they are easy, but because they are hard.</h2>
        </div>
    </header><ol class="social-menu">
            
                <li>
                    <a 
                        href='https://github.com/floating15'
                        target="_blank"
                        title="GitHub"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://twitter.com'
                        target="_blank"
                        title="Linkedin"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-linkedin" width="28" height="28" viewBox="0 0 24 24" stroke-width="1.5" stroke="#9e9e9e" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <rect x="4" y="4" width="16" height="16" rx="2" />
  <line x1="8" y1="11" x2="8" y2="16" />
  <line x1="8" y1="8" x2="8" y2="8.01" />
  <line x1="12" y1="16" x2="12" y2="11" />
  <path d="M16 16v-3a2 2 0 0 0 -4 0" />
</svg>
                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://follow.it/haoming-wang?action=followPub'
                        target="_blank"
                        title="r-mail"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-mailbox" width="28" height="28" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M10 21v-6.5a3.5 3.5 0 0 0 -7 0v6.5h18v-6a4 4 0 0 0 -4 -4h-10.5" />
  <path d="M12 11v-8h4l2 2l-2 2h-4" />
  <path d="M6 15h1" />
</svg>
                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://twitter.com'
                        target="_blank"
                        title="Twitter"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c-.002 -.249 1.51 -2.772 1.818 -4.013z" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        

        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="#FF1C02" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>Home</span>
            </a>
        </li>
        
        

        <li >
            <a href='/about/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="#35FF02" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>About</span>
            </a>
        </li>
        
        

        <li >
            <a href='/notes/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-math-function" width="28" height="28" viewBox="0 0 24 24" stroke-width="1.5" stroke="#02EAFF" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M14 10h1c1 0 1 1 2.016 3.527c.984 2.473 .984 3.473 1.984 3.473h1" />
  <path d="M13 17c1.5 0 3 -2 4 -3.5s2.5 -3.5 4 -3.5" />
  <path d="M3 19c0 1.5 .5 2 2 2s2 -4 3 -9s1.5 -9 3 -9s2 .5 2 2" />
  <line x1="5" y1="12" x2="11" y2="12" />
</svg>
                
                <span>Notes</span>
            </a>
        </li>
        
        

        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="#0223FF" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>Archives</span>
            </a>
        </li>
        
        

        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="#F402FF" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>Search</span>
            </a>
        </li>
        
        

        <li >
            <a href='/links/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>Links</span>
            </a>
        </li>
        

        <div class="menu-bottom-section">
            
            
        </div>
    </ol>
</aside>
<main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/linux/" >
                Linux
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/linux-operation-system-iii-file-system-2/">Linux Operation System III (File System 2)</a>
        </h2>
    
        
    </div>

    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">May 01, 2021</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    58 minute read
                </time>
            </div>
        
    </footer>
    

    
</div>
</header>

    <section class="article-content">
    
    
    <blockquote>
<p>All figures in this blog are embedded by Github Image Hosting Service. These figures may not be displayed on mobile devices.</p>
<p>All operations in this series of blogs (Linux Operation System) are done in AWS Elastic Compute Cloud (EC2).</p>
<p>This blog contains lots of gif figures (especially in chapter &ldquo;Vim&rdquo;), please wait a moment to load them.</p>
</blockquote>
<h1 id="pipe-and-redirection">Pipe and Redirection</h1>
<h2 id="-pipe"><code>|</code> pipe</h2>
<p>Every command or program we run in Linux has three data streams connected to it:</p>
<ul>
<li>STDIN (0) or Standard input: which represents data fed into the program or the data the program is working with;</li>
<li>STDOUT (1) or Standard output: which is data printed by the program, by default to the terminal;</li>
<li>STDERR (2) or Standard error: for error messages and also defaults to the terminal.</li>
</ul>
<p>Piping and redirection are the means by which we may connect these streams, input output and error among programs and files to direct data in interesting and useful ways.</p>
<p><img src="https://raw.githubusercontent.com/floating15/img/main/202204221622520.png"
	
	
	
	loading="lazy"
	
	
></p>
<p>Using the pipe symbol <code>|</code>, we can connect two or more commands at the time. So a pipe lets us <strong>send the output of one command as input to another one</strong>. For example, If i want to filter out the the 5th largest directory or file in <code>/var</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ ls -lSh /var
total 44K
drwxr-xr-x  <span class="m">2</span> root root   4.0K Apr <span class="m">22</span> 06:25 backups
drwxr-xr-x <span class="m">13</span> root root   4.0K Apr <span class="m">15</span> 02:41 cache
drwxrwxrwt  <span class="m">2</span> root root   4.0K Nov <span class="m">29</span> 23:33 crash
drwxr-xr-x <span class="m">41</span> root root   4.0K Apr <span class="m">15</span> 03:17 lib
drwxrwsr-x  <span class="m">2</span> root staff  4.0K Apr <span class="m">15</span>  <span class="m">2020</span> <span class="nb">local</span>
drwxrwxr-x  <span class="m">9</span> root syslog 4.0K Apr <span class="m">22</span> 00:00 log
drwxrwsr-x  <span class="m">2</span> root mail   4.0K Nov <span class="m">29</span> 23:30 mail
drwxr-xr-x  <span class="m">2</span> root root   4.0K Nov <span class="m">29</span> 23:30 opt
drwxr-xr-x  <span class="m">7</span> root root   4.0K Nov <span class="m">29</span> 23:36 snap
drwxr-xr-x  <span class="m">4</span> root root   4.0K Nov <span class="m">29</span> 23:31 spool
drwxrwxrwt  <span class="m">6</span> root root   4.0K Apr <span class="m">22</span> 02:01 tmp
lrwxrwxrwx  <span class="m">1</span> root root      <span class="m">9</span> Nov <span class="m">29</span> 23:30 lock -&gt; /run/lock
lrwxrwxrwx  <span class="m">1</span> root root      <span class="m">4</span> Nov <span class="m">29</span> 23:30 run -&gt; /run
ubuntu@ip-172-31-87-26:~$ ls -lSh /var <span class="p">|</span> head -n <span class="m">6</span> <span class="p">|</span> tail -n <span class="m">1</span>
drwxrwsr-x  <span class="m">2</span> root staff  4.0K Apr <span class="m">15</span>  <span class="m">2020</span> <span class="nb">local</span>
</code></pre></td></tr></table>
</div>
</div><p>Notice that the first line of the STDOUT of <code>ls</code> is &ldquo;total 44K&rdquo; thus we need specify <code>-n 6</code> for the <code>head</code> command instead of <code>-n 5</code>.</p>
<p>Here is another example, I want to find out how many authentication failures took place.</p>
<ul>
<li>First, using <code>cat</code> which will return the entire file <code>/var/log/auth.log</code>, this is the file where authentications are saved.</li>
<li>Then the output of the cat command will be given as input to another comment called <code>grep</code>, which searches for a string inside a file or a text and displays the lines containing the string.</li>
<li>And finally, use <code>wc</code> to count the lines of the output of the <code>grep</code> command.</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ cat -n /var/log/auth.log <span class="p">|</span> grep -a <span class="s2">&#34;failure&#34;</span> <span class="p">|</span> wc -l
<span class="m">48</span>
</code></pre></td></tr></table>
</div>
</div><p>So there were 48 authentication failures saved in the log file.</p>
<p>Here, <code>wc</code> is short for word count. It prints line, word, and byte counts for each file.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ wc /etc/passwd
  <span class="m">34</span>   <span class="m">48</span> <span class="m">1825</span> /etc/passwd
</code></pre></td></tr></table>
</div>
</div><p>So there are 34 lines, 48 words and 1825 characters in that file. If you only want to see the line or word or character counts, then use option <code>-l</code>, <code>-w</code> or <code>-c</code> respectively.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ wc -l /etc/passwd
<span class="m">34</span> /etc/passwd
ubuntu@ip-172-31-87-26:~$ wc -w /etc/passwd
<span class="m">48</span> /etc/passwd
ubuntu@ip-172-31-87-26:~$ wc -c /etc/passwd
<span class="m">1825</span> /etc/passwd
</code></pre></td></tr></table>
</div>
</div><h2 id="redirection">Redirection</h2>
<p>Every command you run has three data streams connected to it: STDIN (0) or Standard input, STDOUT (1) or or Standard Output and STDERR (2) or Standard error.</p>
<h3 id="heading"><code>&gt;</code></h3>
<p>Normally, when we run a command, we want to see the output on the screen, in the terminal, but sometimes we may wish to save it to a file, to keep it for the record, feed it into another program or send it to someone else. To redirect the output of a command to a file there&rsquo;s the output redirection operator <code>&gt;</code>; it indicates to the command that we wish the output to be saved in a file instead of being printed on the screen.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ ls -l
total <span class="m">12</span>
drwxrwxr-x <span class="m">2</span> ubuntu ubuntu <span class="m">4096</span> Apr <span class="m">21</span> 12:40 dir1
drwxrwxr-x <span class="m">2</span> ubuntu ubuntu <span class="m">4096</span> Apr <span class="m">21</span> 11:40 dir2
-rw-r--r-- <span class="m">1</span> ubuntu ubuntu <span class="m">4096</span> Apr <span class="m">21</span> 12:47 passwd
ubuntu@ip-172-31-87-26:~$ ls -l &gt; ls.txt
ubuntu@ip-172-31-87-26:~$ cat ls.txt 
total <span class="m">12</span>
drwxrwxr-x <span class="m">2</span> ubuntu ubuntu <span class="m">4096</span> Apr <span class="m">21</span> 12:40 dir1
drwxrwxr-x <span class="m">2</span> ubuntu ubuntu <span class="m">4096</span> Apr <span class="m">21</span> 11:40 dir2
-rw-rw-r-- <span class="m">1</span> ubuntu ubuntu    <span class="m">0</span> Apr <span class="m">22</span> 09:18 ls.txt
-rw-r--r-- <span class="m">1</span> ubuntu ubuntu <span class="m">4096</span> Apr <span class="m">21</span> 12:47 passwd
</code></pre></td></tr></table>
</div>
</div><p>So you can see that when we run <code>ls -l</code>, the outcome, as expected, is printed out the output on the screen. But when we use <code>&gt;</code> to redirect the STDOUT of <code>ls</code>, the contents will be redirected to the file instead of printing it on the screen.</p>
<p>When using the output redirection will have two case scenarios.</p>
<ul>
<li>the file is <strong>created</strong> if it doesn&rsquo;t exist</li>
<li>it is <strong>overwritten</strong> if it already exists.</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ ifconfig &gt; ls.txt 
ubuntu@ip-172-31-87-26:~$ cat ls.txt 
eth0: <span class="nv">flags</span><span class="o">=</span>4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu <span class="m">9001</span>
        inet 172.31.87.26  netmask 255.255.240.0  broadcast 172.31.95.255
        inet6 fe80::10b8:5eff:fe3f:aa45  prefixlen <span class="m">64</span>  scopeid 0x20&lt;link&gt;
        ether 12:b8:5e:3f:aa:45  txqueuelen <span class="m">1000</span>  <span class="o">(</span>Ethernet<span class="o">)</span>
        RX packets <span class="m">504542</span>  bytes <span class="m">481777304</span> <span class="o">(</span>481.7 MB<span class="o">)</span>
        RX errors <span class="m">0</span>  dropped <span class="m">0</span>  overruns <span class="m">0</span>  frame <span class="m">0</span>
        TX packets <span class="m">278091</span>  bytes <span class="m">50826569</span> <span class="o">(</span>50.8 MB<span class="o">)</span>
        TX errors <span class="m">0</span>  dropped <span class="m">0</span> overruns <span class="m">0</span>  carrier <span class="m">0</span>  collisions <span class="m">0</span>

lo: <span class="nv">flags</span><span class="o">=</span>73&lt;UP,LOOPBACK,RUNNING&gt;  mtu <span class="m">65536</span>
        inet 127.0.0.1  netmask 255.0.0.0
        inet6 ::1  prefixlen <span class="m">128</span>  scopeid 0x10&lt;host&gt;
        loop  txqueuelen <span class="m">1000</span>  <span class="o">(</span>Local Loopback<span class="o">)</span>
        RX packets <span class="m">844</span>  bytes <span class="m">84372</span> <span class="o">(</span>84.3 KB<span class="o">)</span>
        RX errors <span class="m">0</span>  dropped <span class="m">0</span>  overruns <span class="m">0</span>  frame <span class="m">0</span>
        TX packets <span class="m">844</span>  bytes <span class="m">84372</span> <span class="o">(</span>84.3 KB<span class="o">)</span>
        TX errors <span class="m">0</span>  dropped <span class="m">0</span> overruns <span class="m">0</span>  carrier <span class="m">0</span>  collisions <span class="m">0</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="heading-1"><code>&gt;&gt;</code></h3>
<p>If we don&rsquo;t want to override the file, we can instead append or add to the end of the file by using the double greater than operator (<code>&gt;&gt;</code>). the <code>&gt;&gt;</code> operator <strong>creates</strong> the file if it doesn&rsquo;t exist or <strong>appends</strong> to it if it already exists.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ ifconfig &gt;&gt; icg.txt
ubuntu@ip-172-31-87-26:~$ ls -l &gt;&gt; icg.txt 
ubuntu@ip-172-31-87-26:~$ cat icg.txt 
eth0: <span class="nv">flags</span><span class="o">=</span>4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu <span class="m">9001</span>
        inet 172.31.87.26  netmask 255.255.240.0  broadcast 172.31.95.255
        inet6 fe80::10b8:5eff:fe3f:aa45  prefixlen <span class="m">64</span>  scopeid 0x20&lt;link&gt;
        ether 12:b8:5e:3f:aa:45  txqueuelen <span class="m">1000</span>  <span class="o">(</span>Ethernet<span class="o">)</span>
        RX packets <span class="m">504662</span>  bytes <span class="m">481786312</span> <span class="o">(</span>481.7 MB<span class="o">)</span>
        RX errors <span class="m">0</span>  dropped <span class="m">0</span>  overruns <span class="m">0</span>  frame <span class="m">0</span>
        TX packets <span class="m">278179</span>  bytes <span class="m">50839123</span> <span class="o">(</span>50.8 MB<span class="o">)</span>
        TX errors <span class="m">0</span>  dropped <span class="m">0</span> overruns <span class="m">0</span>  carrier <span class="m">0</span>  collisions <span class="m">0</span>

lo: <span class="nv">flags</span><span class="o">=</span>73&lt;UP,LOOPBACK,RUNNING&gt;  mtu <span class="m">65536</span>
        inet 127.0.0.1  netmask 255.0.0.0
        inet6 ::1  prefixlen <span class="m">128</span>  scopeid 0x10&lt;host&gt;
        loop  txqueuelen <span class="m">1000</span>  <span class="o">(</span>Local Loopback<span class="o">)</span>
        RX packets <span class="m">844</span>  bytes <span class="m">84372</span> <span class="o">(</span>84.3 KB<span class="o">)</span>
        RX errors <span class="m">0</span>  dropped <span class="m">0</span>  overruns <span class="m">0</span>  frame <span class="m">0</span>
        TX packets <span class="m">844</span>  bytes <span class="m">84372</span> <span class="o">(</span>84.3 KB<span class="o">)</span>
        TX errors <span class="m">0</span>  dropped <span class="m">0</span> overruns <span class="m">0</span>  carrier <span class="m">0</span>  collisions <span class="m">0</span>

total <span class="m">20</span>
drwxrwxr-x <span class="m">2</span> ubuntu ubuntu <span class="m">4096</span> Apr <span class="m">21</span> 12:40 dir1
drwxrwxr-x <span class="m">2</span> ubuntu ubuntu <span class="m">4096</span> Apr <span class="m">21</span> 11:40 dir2
-rw-rw-r-- <span class="m">1</span> ubuntu ubuntu  <span class="m">894</span> Apr <span class="m">22</span> 09:24 icg.txt
-rw-rw-r-- <span class="m">1</span> ubuntu ubuntu  <span class="m">894</span> Apr <span class="m">22</span> 09:21 ls.txt
-rw-r--r-- <span class="m">1</span> ubuntu ubuntu <span class="m">4096</span> Apr <span class="m">21</span> 12:47 passwd
</code></pre></td></tr></table>
</div>
</div><p>We see the output of both commands. The output of the second one was appended to the file.</p>
<p>Recall that everything is a file in Linux or is treated as a file. There is an example which epitomizes this concept. In Linux, even the terminal is treated as a file. To see the file behind a terminal run the <code>tty</code> command.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ tty
/dev/pts/0
</code></pre></td></tr></table>
</div>
</div><p>It&rsquo;s called <code>0</code> in <code>pts</code> directory, which resides in <code>dev</code>. Here we open another terminal and redirect the output of a command to the file that represents the other terminal.</p>
<p><img src="https://raw.githubusercontent.com/floating15/img/main/202204221739157.gif"
	
	
	
	loading="lazy"
	
	
></p>
<p>As expected, we see the outputs of the command <code>ifconfig</code>, <code>ls</code> and <code>echo</code> were written to the file that represents the terminal and appeared in the first terminal.</p>
<h3 id="2-2"><code>2&gt;</code>, <code>2&gt;&gt;</code></h3>
<p>The three streams STDIN, STDOUT and STDERR, attached to any Linux command, are associated with the number 0, 1, 2 respectively. We use these numbers to identify the streams.</p>
<p>If we place a number before the <code>&gt;</code> or <code>&gt;&gt;</code> operator, like <code>2&gt;</code>(Notice that there can not exist space between them), then it will redirect that stream. If we don&rsquo;t use a number, like we have been doing so far, then it defaults to stream 1, which is STDOUT.</p>
<p>Let&rsquo;s see some examples. I&rsquo;m running a command which will return an error.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ tail -n <span class="m">3</span> /etc/shadow
tail: cannot open <span class="s1">&#39;/etc/shadow&#39;</span> <span class="k">for</span> reading: Permission denied
</code></pre></td></tr></table>
</div>
</div><p>A non-privileged user cannot see that file. To redirect the error message to a file:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ tail -n <span class="m">3</span> /etc/shadow &gt; err.txt
tail: cannot open <span class="s1">&#39;/etc/shadow&#39;</span> <span class="k">for</span> reading: Permission denied
ubuntu@ip-172-31-87-26:~$ tail -n <span class="m">3</span> /etc/shadow 2&gt; err.txt
ubuntu@ip-172-31-87-26:~$ cat err.txt 
tail: cannot open <span class="s1">&#39;/etc/shadow&#39;</span> <span class="k">for</span> reading: Permission denied
ubuntu@ip-172-31-87-26:~$ ls 2&gt; ls.txt
dir1  dir2  err.txt  icg.txt  ls.txt  passwd
</code></pre></td></tr></table>
</div>
</div><p>You can see that barely <code>&gt;</code> operator can not redirect STDERR stream, and correspondingly <code>2&gt;</code> can not redirect STDOUT stream. To redirect both the normal output and the error messages of the same command, you should specify <code>&gt;</code> and <code>2&gt;</code> respectively.</p>
<p>For example, the first half of the command I am running will return the expected contents, while the second half will lead an permission error.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ tail -n <span class="m">3</span> /etc/passwd /etc/shadow
<span class="o">==</span>&gt; /etc/passwd &lt;<span class="o">==</span>
systemd-coredump:x:999:999:systemd Core Dumper:/:/usr/sbin/nologin
ubuntu:x:1000:1000:Ubuntu:/home/ubuntu:/bin/bash
lxd:x:998:100::/var/snap/lxd/common/lxd:/bin/false
tail: cannot open <span class="s1">&#39;/etc/shadow&#39;</span> <span class="k">for</span> reading: Permission denied
</code></pre></td></tr></table>
</div>
</div><p>And we can redirect them respectively:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ tail -n <span class="m">3</span> /etc/passwd /etc/shadow &gt; pswd.txt 2&gt; error.txt
ubuntu@ip-172-31-87-26:~$ cat pswd.txt error.txt 
<span class="o">==</span>&gt; /etc/passwd &lt;<span class="o">==</span>
systemd-coredump:x:999:999:systemd Core Dumper:/:/usr/sbin/nologin
ubuntu:x:1000:1000:Ubuntu:/home/ubuntu:/bin/bash
lxd:x:998:100::/var/snap/lxd/common/lxd:/bin/false
tail: cannot open <span class="s1">&#39;/etc/shadow&#39;</span> <span class="k">for</span> reading: Permission denied
</code></pre></td></tr></table>
</div>
</div><h3 id="21"><code>2&gt;&amp;1</code></h3>
<p>You can also redirect both standard output and standard error to the same file. Here we redirect standard output to a file and the standard error to standard output <code>&amp;1</code>.</p>
<p>Note that the file contains both the output and the errors. One remark here: we redirect to a stream by placing an <code>&amp;</code> in front of a stream 1. Otherwise it would have redirected to a file called 1.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ tail -n <span class="m">3</span> /etc/passwd /etc/shadow &gt; pswd1.txt 2&gt;<span class="p">&amp;</span><span class="m">1</span>
ubuntu@ip-172-31-87-26:~$ cat pswd1.txt 
<span class="o">==</span>&gt; /etc/passwd &lt;<span class="o">==</span>
systemd-coredump:x:999:999:systemd Core Dumper:/:/usr/sbin/nologin
ubuntu:x:1000:1000:Ubuntu:/home/ubuntu:/bin/bash
lxd:x:998:100::/var/snap/lxd/common/lxd:/bin/false
tail: cannot open <span class="s1">&#39;/etc/shadow&#39;</span> <span class="k">for</span> reading: Permission denied
</code></pre></td></tr></table>
</div>
</div><p>You can also attain this result by this:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ tail -n <span class="m">3</span> /etc/passwd /etc/shadow &gt; pswd3.txt 2&gt;&gt;pswd3.txt
ubuntu@ip-172-31-87-26:~$ cat pswd3.txt 
<span class="o">==</span>&gt; /etc/passwd &lt;<span class="o">==</span>
systemd-coredump:x:999:999:systemd Core Dumper:/:/usr/sbin/nologin
ubuntu:x:1000:1000:Ubuntu:/home/ubuntu:/bin/bash
lxd:x:998:100::/var/snap/lxd/common/lxd:/bin/false
tail: cannot open <span class="s1">&#39;/etc/shadow&#39;</span> <span class="k">for</span> reading: Permission denied
</code></pre></td></tr></table>
</div>
</div><h3 id="redirection-and-pipe">redirection and pipe</h3>
<p>You can also combine command reduction with pipes. Let&rsquo;s filter the line that contains the Mac address using a pipe:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ ifconfig <span class="p">|</span> grep <span class="s2">&#34;ether&#34;</span> &gt; mac.txt
ubuntu@ip-172-31-87-26:~$ cat mac.txt 
        ether 12:b8:5e:3f:aa:45  txqueuelen <span class="m">1000</span>  <span class="o">(</span>Ethernet<span class="o">)</span>
</code></pre></td></tr></table>
</div>
</div><p>By the way, if you just want to get the Mac address without extra strings, you could try <code>cut</code> command. It cuts out sections from each line, you can specify the delimiter and field number by <code>-d</code>, <code>-f</code> options.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ ifconfig <span class="p">|</span> grep <span class="s2">&#34;ether&#34;</span> <span class="p">|</span> cut -d<span class="s2">&#34; &#34;</span> -f <span class="m">10</span>
12:b8:5e:3f:aa:45
</code></pre></td></tr></table>
</div>
</div><p>Another example:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ cat /etc/passwd <span class="p">|</span> tail -n <span class="m">10</span>
tss:x:106:111:TPM software stack,,,:/var/lib/tpm:/bin/false
uuidd:x:107:112::/run/uuidd:/usr/sbin/nologin
tcpdump:x:108:113::/nonexistent:/usr/sbin/nologin
sshd:x:109:65534::/run/sshd:/usr/sbin/nologin
landscape:x:110:115::/var/lib/landscape:/usr/sbin/nologin
pollinate:x:111:1::/var/cache/pollinate:/bin/false
ec2-instance-connect:x:112:65534::/nonexistent:/usr/sbin/nologin
systemd-coredump:x:999:999:systemd Core Dumper:/:/usr/sbin/nologin
ubuntu:x:1000:1000:Ubuntu:/home/ubuntu:/bin/bash
lxd:x:998:100::/var/snap/lxd/common/lxd:/bin/false
ubuntu@ip-172-31-87-26:~$ cat /etc/passwd <span class="p">|</span> tail -n <span class="m">10</span> <span class="p">|</span> cut -d: -f <span class="m">1</span>
tss
uuidd
tcpdump
sshd
landscape
pollinate
ec2-instance-connect
systemd-coredump
ubuntu
lxd
ubuntu@ip-172-31-87-26:~$ cat /etc/passwd <span class="p">|</span> tail -n <span class="m">10</span> <span class="p">|</span> cut -d: -f <span class="m">6</span>
/var/lib/tpm
/run/uuidd
/nonexistent
/run/sshd
/var/lib/landscape
/var/cache/pollinate
/nonexistent
/
/home/ubuntu
/var/snap/lxd/common/lxd
</code></pre></td></tr></table>
</div>
</div><h3 id="tee-command"><code>tee</code> command</h3>
<p>We can store and view the output of the command <strong>at the same time</strong> by <code>tee</code> command. Its name comes from the t-splitter used in plumbing. It basically breaks the output of a program so that it can be both displayed and saved in a file.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ cat /etc/passwd <span class="p">|</span> tail -n <span class="m">10</span> <span class="p">|</span> cut -d: -f <span class="m">6</span> <span class="p">|</span> tee path.txt
/var/lib/tpm
/run/uuidd
/nonexistent
/run/sshd
/var/lib/landscape
/var/cache/pollinate
/nonexistent
/
/home/ubuntu
/var/snap/lxd/common/lxd
ubuntu@ip-172-31-87-26:~$ cat path.txt 
/var/lib/tpm
/run/uuidd
/nonexistent
/run/sshd
/var/lib/landscape
/var/cache/pollinate
/nonexistent
/
/home/ubuntu
/var/snap/lxd/common/lxd
</code></pre></td></tr></table>
</div>
</div><p>By default, <code>tee</code> command <strong>overwrites</strong> the file if the file is existed. You can instruct <code>tee</code> to <strong>append</strong> to the end of the file using the option <code>‚Äìa</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ ls <span class="p">|</span> tee -a path.txt 
dir1
dir2
err.txt
error.txt
icg.txt
ls.txt
mac.txt
passwd
path.txt
pswd.txt
pswd1.txt
pswd2
pswd2.txt
pswd3.txt
ubuntu@ip-172-31-87-26:~$ cat path.txt 
/var/lib/tpm
/run/uuidd
/nonexistent
/run/sshd
/var/lib/landscape
/var/cache/pollinate
/nonexistent
/
/home/ubuntu
/var/snap/lxd/common/lxd
dir1
dir2
err.txt
error.txt
icg.txt
ls.txt
mac.txt
passwd
path.txt
pswd.txt
pswd1.txt
pswd2
pswd2.txt
pswd3.txt
</code></pre></td></tr></table>
</div>
</div><h2 id="compendium">Compendium</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="c1">##########################</span>
<span class="c1">## Piping and Command Redirection</span>
<span class="c1">##########################</span>
 
<span class="c1">## Piping Examples:</span>
 
ls -lSh /etc/ <span class="p">|</span> head            <span class="c1"># see the first 10 files by size</span>
ps -ef <span class="p">|</span> grep sshd              <span class="c1"># checking if sshd is running</span>
ps aux --sort<span class="o">=</span>-%mem <span class="p">|</span> head -n <span class="m">3</span>  <span class="c1"># showing the first 3 process by memory consumption</span>
 
<span class="c1">## Command Redirection</span>
 
<span class="c1"># output redirection</span>
ps aux &gt; running_processes.txt
who -H &gt; loggedin_users.txt
 
<span class="c1"># appending to a file</span>
id &gt;&gt; loggedin_users.txt
 
<span class="c1"># output and error redirection</span>
tail -n <span class="m">10</span> /var/log/*.log &gt; output.txt 2&gt; errors.txt
 
<span class="c1"># redirecting both the output and errors to the same file</span>
tail -n <span class="m">2</span> /etc/passwd /etc/shadow &gt; output_errors.txt 2&gt;<span class="p">&amp;</span><span class="m">1</span>
 
cat -n /var/log/auth.log <span class="p">|</span> grep -ai <span class="s2">&#34;authentication failure&#34;</span> <span class="p">|</span> wc -l
cat -n /var/log/auth.log <span class="p">|</span> grep -ai <span class="s2">&#34;authentication failure&#34;</span> &gt; auth.txt     <span class="c1"># =&gt; piping and redirection</span>
</code></pre></td></tr></table>
</div>
</div><h1 id="find">Find</h1>
<h2 id="locate-command"><code>locate</code> command</h2>
<p>To install <code>locate</code> on Ubuntu just run:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">so sudo apt install mlocate
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>By the way <code>mlocate</code> is the new implementation of locate. So at least on the latest versions of Ubuntu when you run <code>locate</code> it actually runs <code>mlocate</code>.</p>
</blockquote>
<p><code>locate</code> is faster than <code>find</code> because it doesn&rsquo;t search in the file system in real time. It uses a previously built database, whereas the <code>find</code> command searches in the real system, through all the actual directories and files, and the <code>find</code> command has more options available.</p>
<p>The <code>locate</code> command searches by name and returns a list of path names <strong>containing that name in their path</strong>. The database used by <code>locate</code> will be updated periodically. It can be done automatically on a daily basis from Chron or you do it manually by running <code>sudo updatedb </code>. The database created by <code>updatedb</code> that will be searched by the <code>locate</code> command is <code>/var/lib/mlocate/mlocate.db</code> To see its path together with some statistics, like how many files and directories are indexed, run <code>locate -S</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ locate -S
Database /var/lib/mlocate/mlocate.db:
	<span class="m">23815</span> directories
	<span class="m">178437</span> files
	<span class="m">11104634</span> bytes in file names
	<span class="m">4151686</span> bytes used to store database
</code></pre></td></tr></table>
</div>
</div><h3 id="-b"><code>-b</code></h3>
<p>The basic usage of the command is <code>locate &lt;filename or dirname&gt;</code>, and it has returned a list with all path names that contain the string. Pay attention that it <strong>searches for the string in the entire absolute path name</strong>. For example:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ locate dir1
/home/ubuntu/dir1
/home/ubuntu/dir11
/home/ubuntu/dir1/a1
/home/ubuntu/dir1/a3
/home/ubuntu/dir1/a4
/home/ubuntu/dir1/a5
</code></pre></td></tr></table>
</div>
</div><p>It will find all the files and directories that have that string in their absolute path name. To search only the base name against the specified pattern, use the <code>-b</code> option. This is the opposite of the default option, which is <code>-w</code> or <code>--wholename</code>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ locate -b dir1
/home/ubuntu/dir1
/home/ubuntu/dir11
</code></pre></td></tr></table>
</div>
</div><p>When you search for a name, it will replace that name with star name star implicitly. So if you search for <code>dir1</code>, it will replace that name with <code>*dir1*</code> and will also find the files called <code>dir11</code>.</p>
<p>To disable this behavior and search for a file by the exact name use a <code>\</code> before the name and enclose them in quotation marks. Backslash is a globing character that disables the implicit replacement of of <code>string</code> by <code>*string*</code>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ locate -b <span class="s2">&#34;\dir1&#34;</span>
/home/ubuntu/dir1
</code></pre></td></tr></table>
</div>
</div><h3 id="updatedb-command"><code>updatedb</code> command</h3>
<p>As said earlier, the <code>locate</code> command does not search for a file in the file system, but in its own database, which should be updated periodically. The <code>locate</code> command can not find anything that was just created, because the new file does not exist in its database.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ mkdir dir1234
ubuntu@ip-172-31-87-26:~$ locate dir1234
</code></pre></td></tr></table>
</div>
</div><p>We can update the database by <code>sudo updatedb</code> to reflect the latest changes in the file system.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ sudo updatedb
ubuntu@ip-172-31-87-26:~$ locate dir1234
/home/ubuntu/dir1234
</code></pre></td></tr></table>
</div>
</div><p>And this time it found the file.</p>
<h3 id="-e"><code>-e</code></h3>
<p>If we remove a file, <code>locate</code> can still find it, because that change has not been updated into the database. You can update the database as root everytime you use it, but a more efficient way is specifying the <code>-e</code> or <code>--existing</code> option. It will check if the file really exists.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ locate dir1234
/home/ubuntu/dir1234
ubuntu@ip-172-31-87-26:~$ rm -r dir1234
ubuntu@ip-172-31-87-26:~$ locate dir1234
/home/ubuntu/dir1234
ubuntu@ip-172-31-87-26:~$ locate -e dir1234
</code></pre></td></tr></table>
</div>
</div><p>Note that when you update the mlocate database, it keeps timestamp information in the database. This allows <code>mlocate</code> to know if the contents of a directory changed without reading the contents again and makes updates to the database faster.</p>
<h3 id="-i"><code>-i</code></h3>
<p>Another useful option is <code>-i</code> which will make locate ignore the case. Linux is a case sensitive OS and <code>locate</code> makes no distinction.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ locate Dir1
ubuntu@ip-172-31-87-26:~$ locate -ie Dir1
/home/ubuntu/dir1
/home/ubuntu/dir11
/home/ubuntu/dir1/a1
/home/ubuntu/dir1/a3
/home/ubuntu/dir1/a4
/home/ubuntu/dir1/a5
</code></pre></td></tr></table>
</div>
</div><h3 id="-r"><code>-r</code></h3>
<p>The last option will discuss is <code>-r</code>, which allows you to search by using simple regular expressions. We will talk about this topic later.</p>
<h3 id="which-command"><code>which</code> command</h3>
<p>The <code>which</code> command locates a command and returns the absolute path of the executable that is called when the command is run. It does this by searching the path for <strong>executable files</strong>. This can be useful in finding the location of an executable command when you intend to create a shortcut or run it using its absolute path.</p>
<p>To search for more executables at once all you have to do is to give the executables as arguments</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ which <span class="nb">pwd</span> ifconfig find grep rm
/usr/bin/pwd
/usr/sbin/ifconfig
/usr/bin/find
/usr/bin/grep
/usr/bin/rm
</code></pre></td></tr></table>
</div>
</div><h2 id="find-command"><code>find</code> command</h2>
<p>Other Linux command used to search for files is <code>find</code>. It&rsquo;s a complex command line utility that searches for files in a directory and recursively throw subdirectories as well.</p>
<p>Using find, you can search for files by name, owner, group type, permissions , date and other criteria. The syntax of the <code>fine</code> command is</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">find <span class="o">[</span>path<span class="o">]</span> <span class="o">[</span>criteria<span class="o">]</span>
</code></pre></td></tr></table>
</div>
</div><p>And the form of the criteria is like <code>-option expression</code>. Let&rsquo;s create a new directory with two files. This is the directory tree.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ mkdir projects
ubuntu@ip-172-31-87-26:~$ touch projects/report.txt projects/todo.txt
ubuntu@ip-172-31-87-26:~$ tree
.
‚îú‚îÄ‚îÄ dir2
‚îú‚îÄ‚îÄ ls.txt
‚îú‚îÄ‚îÄ mac.txt
‚îî‚îÄ‚îÄ projects
    ‚îú‚îÄ‚îÄ report.txt
    ‚îî‚îÄ‚îÄ todo.txt

<span class="m">2</span> directories, <span class="m">4</span> files
</code></pre></td></tr></table>
</div>
</div><h3 id="-name--iname"><code>-name</code>, <code>-iname</code></h3>
<p>To search by name, specify <code>-name</code> option. The following command line will search the file whose name is <code>todo.txt</code> in the current directory (<code>.</code>):</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ find . -name todo.txt
./projects/todo.txt
ubuntu@ip-172-31-87-26:~$ find . -name todo.txT
</code></pre></td></tr></table>
</div>
</div><p>As anything else in Linux, the name of the file is case sensitive. Another option is <code>-iname</code>, which is similar to name, but the match is case insensitive.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ find . -iname todo.tXt
./projects/todo.txt
</code></pre></td></tr></table>
</div>
</div><p>Notice that find will search by that <strong>exact name</strong>. If you want to specify only a part of the filename, you should use the wildcards:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ find . -iname *oDo*
./projects/todo.txt
</code></pre></td></tr></table>
</div>
</div><p><code>*</code> here means any character, it&rsquo;s recommended to enclose them in double quotes. So it&rsquo;s better to specify the searched string like this</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ find . -iname <span class="s2">&#34;*oDo*&#34;</span>
./projects/todo.txt
</code></pre></td></tr></table>
</div>
</div><p>If you search a location where your user is not allowed to see, you&rsquo;ll get the permission denied error. To search in those directories as well, you need to run the command as root.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ find /etc -name passwd
find: ‚Äò/etc/polkit-1/localauthority‚Äô: Permission denied
/etc/passwd
find: ‚Äò/etc/ssl/private‚Äô: Permission denied
find: ‚Äò/etc/sudoers.d‚Äô: Permission denied
/etc/pam.d/passwd
ubuntu@ip-172-31-87-26:~$ sudo find /etc -name passwd
/etc/passwd
/etc/pam.d/passwd
</code></pre></td></tr></table>
</div>
</div><h3 id="-delete"><code>-delete</code></h3>
<p>To find and delete a file pass the <code>-delete</code> option to find. This will delete the file with no possibility of recovering it. So be very careful.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ find . -name todo.txt -delete
ubuntu@ip-172-31-87-26:~$ tree
.
‚îú‚îÄ‚îÄ dir2
‚îú‚îÄ‚îÄ ls.txt
‚îú‚îÄ‚îÄ mac.txt
‚îî‚îÄ‚îÄ projects
    ‚îî‚îÄ‚îÄ report.txt

<span class="m">2</span> directories, <span class="m">3</span> files
</code></pre></td></tr></table>
</div>
</div><h3 id="-ls"><code>-ls</code></h3>
<p>Another option we can pass to find is <code>-ls</code> and it will execute the <code>ls</code> command on each file it will find.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ tree
.
‚îú‚îÄ‚îÄ dir1
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ dir2
‚îÇ¬†¬†     ‚îî‚îÄ‚îÄ dir3
‚îÇ¬†¬†         ‚îî‚îÄ‚îÄ dir1
‚îú‚îÄ‚îÄ dir2
‚îú‚îÄ‚îÄ ls.txt
‚îú‚îÄ‚îÄ mac.txt
‚îî‚îÄ‚îÄ projects
    ‚îî‚îÄ‚îÄ report.txt

<span class="m">6</span> directories, <span class="m">3</span> files
ubuntu@ip-172-31-87-26:~$ find . -name <span class="s2">&#34;dir*&#34;</span> -ls
   <span class="m">256056</span>      <span class="m">4</span> drwxrwxr-x   <span class="m">3</span> ubuntu   ubuntu       <span class="m">4096</span> Apr <span class="m">22</span> 12:47 ./dir1
   <span class="m">256335</span>      <span class="m">4</span> drwxrwxr-x   <span class="m">3</span> ubuntu   ubuntu       <span class="m">4096</span> Apr <span class="m">22</span> 12:47 ./dir1/dir2
   <span class="m">256337</span>      <span class="m">4</span> drwxrwxr-x   <span class="m">3</span> ubuntu   ubuntu       <span class="m">4096</span> Apr <span class="m">22</span> 12:47 ./dir1/dir2/dir3
   <span class="m">256338</span>      <span class="m">4</span> drwxrwxr-x   <span class="m">2</span> ubuntu   ubuntu       <span class="m">4096</span> Apr <span class="m">22</span> 12:47 ./dir1/dir2/dir3/dir1
   <span class="m">307840</span>      <span class="m">4</span> drwxrwxr-x   <span class="m">2</span> ubuntu   ubuntu       <span class="m">4096</span> Apr <span class="m">21</span> 11:40 ./dir2
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>Notice that <code>-ls</code> option must be placed at the <strong>end</strong> of the line, because it lists what comes before it. For example, if you set <code>find . -ls -name xxx</code>, the all contents in the current directory will be listed in a long format.</p>
</blockquote>
<h3 id="-type--maxdepth"><code>-type</code>, <code>-maxdepth</code></h3>
<p>To search files by type, you can use <code>-type</code> option. <code>-type d</code> means directory, <code>-type f</code> means regular file.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ sudo find /var -type f <span class="p">|</span> wc
   <span class="m">3365</span>    <span class="m">3365</span>  <span class="m">150961</span>
</code></pre></td></tr></table>
</div>
</div><p>For example, I am counting all files from <code>/var</code> and its subdirectories recursively. This is its default behavior. However, you can specify the depth of a directory traversal using <code>-maxdepth</code> option. This will control the maximum searching levels deep.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ sudo find /var -maxdepth <span class="m">2</span> -type f <span class="p">|</span> wc
     <span class="m">49</span>      <span class="m">49</span>    <span class="m">1356</span>
ubuntu@ip-172-31-87-26:~$ sudo find /var -maxdepth <span class="m">3</span> -type f <span class="p">|</span> wc
    <span class="m">131</span>     <span class="m">131</span>    <span class="m">3815</span>
ubuntu@ip-172-31-87-26:~$ sudo find /var -maxdepth <span class="m">4</span> -type f <span class="p">|</span> wc
   <span class="m">3143</span>    <span class="m">3143</span>  <span class="m">134502</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="-perm"><code>-perm</code></h3>
<p><code>-perm</code> option will search by those exact permissions.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ sudo find /etc -perm <span class="m">755</span> -type d,f <span class="p">|</span>wc
    <span class="m">306</span>     <span class="m">306</span>    <span class="m">7623</span>
</code></pre></td></tr></table>
</div>
</div><p>Notice that we separate multiple arguments to <code>-type</code> using: &lsquo;,&rsquo;</p>
<p>Notice that when you specify more options or search criteria, those criteria should be true at the same time, that is when you set multi options, <code>find</code> will search in their <strong>intersection</strong>, even though you set the same options multi-times.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ sudo find /etc -perm <span class="m">755</span> -type d -type f <span class="p">|</span>wc
      <span class="m">0</span>       <span class="m">0</span>       <span class="m">0</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="-size"><code>-size</code></h3>
<p>To search by size, use the <code>-size</code> option and the number. it will search the directories recursively for files with the size of one kilobytes rounded up to the next unit.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ sudo find /etc -size 10k -ls
      <span class="m">698</span>     <span class="m">12</span> -rw-r--r--   <span class="m">1</span> root     root        <span class="m">10037</span> Feb  <span class="m">7</span>  <span class="m">2020</span> /etc/nanorc
       <span class="m">44</span>     <span class="m">12</span> -rw-r--r--   <span class="m">1</span> root     root         <span class="m">9440</span> Apr <span class="m">15</span> 06:07 /etc/locale.gen
      <span class="m">802</span>     <span class="m">12</span> -rwxr-xr-x   <span class="m">1</span> root     root         <span class="m">9802</span> Mar  <span class="m">9</span>  <span class="m">2020</span> /etc/vmware-tools/vm-support
      <span class="m">800</span>     <span class="m">12</span> -rw-r--r--   <span class="m">1</span> root     root        <span class="m">10144</span> Mar  <span class="m">9</span>  <span class="m">2020</span> /etc/vmware-tools/vgauth/schemas/xmldsig-core-schema.xsd
      <span class="m">788</span>     <span class="m">12</span> -rw-r--r--   <span class="m">1</span> root     root         <span class="m">9967</span> Mar  <span class="m">9</span>  <span class="m">2020</span> /etc/vmware-tools/tools.conf.example
</code></pre></td></tr></table>
</div>
</div><p>You can also use the <code>+</code> and <code>-</code> prefixes to signify greater than and less than the size of n units.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ sudo find /var -size +10M -size -30M -ls
    <span class="m">65439</span>  <span class="m">26408</span> -rw-r--r--   <span class="m">1</span> root     root     <span class="m">27037832</span> Apr <span class="m">23</span>  <span class="m">2020</span> /var/lib/apt/lists/us-east-1.ec2.archive.ubuntu.com_ubuntu_dists_focal_universe_i18n_Translation-en
     <span class="m">2092</span>  <span class="m">25576</span> -rw-------   <span class="m">2</span> root     root     <span class="m">26189824</span> Nov <span class="m">29</span> 23:36 /var/lib/snapd/seed/snaps/amazon-ssm-agent_4046.snap
    <span class="m">65370</span>  <span class="m">27276</span> -rw-------   <span class="m">2</span> root     root     <span class="m">27930624</span> Apr <span class="m">14</span> 09:44 /var/lib/snapd/snaps/amazon-ssm-agent_5163.snap
     <span class="m">2092</span>  <span class="m">25576</span> -rw-------   <span class="m">2</span> root     root     <span class="m">26189824</span> Nov <span class="m">29</span> 23:36 /var/lib/snapd/snaps/amazon-ssm-agent_4046.snap
    <span class="m">65370</span>  <span class="m">27276</span> -rw-------   <span class="m">2</span> root     root     <span class="m">27930624</span> Apr <span class="m">14</span> 09:44 /var/lib/snapd/cache/a1e309752e4db2726ed7837713e0bcd1c54aa9929fab90cee57b6650f7d0540af959382a5337e7e0f925fa490d593344
   <span class="m">256002</span>  <span class="m">24580</span> -rw-r-----   <span class="m">1</span> root     systemd-journal <span class="m">25165824</span> Apr <span class="m">22</span> 13:17 /var/log/journal/d0b8b5a439b34eb9b32ecd640e8efcec/system.journal
</code></pre></td></tr></table>
</div>
</div><p>Notice, since you set <code>-size</code> twice times, <code>find</code> will search in the intersection, that is the files have the size greater than <code>10M</code> and smaller that <code>25M</code>.</p>
<h3 id="-atime--mtime--ctime"><code>-atime</code>, <code>-mtime</code>, <code>-ctime</code></h3>
<p>To search by timestamps recorded on the files, used the <code>-atime</code>, <code>-mtime</code> or <code>-ctime</code> options and the number that represents the number of <strong>days</strong>. For example <code>-mtime 0</code> filters the files modified in the last 24 hours. And if you use <code>-mtime 1</code>, it means files modify to between 1 and 2 days ago.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ sudo find /etc  -atime <span class="m">2</span>
/etc/e2scrub.conf
/etc/magic
ubuntu@ip-172-31-87-26:~$ stat /etc/magic
  File: /etc/magic
  Size: <span class="m">111</span>       	Blocks: <span class="m">8</span>          IO Block: <span class="m">4096</span>   regular file
Device: ca01h/51713d	Inode: <span class="m">635</span>         Links: <span class="m">1</span>
Access: <span class="o">(</span>0644/-rw-r--r--<span class="o">)</span>  Uid: <span class="o">(</span>    0/    root<span class="o">)</span>   Gid: <span class="o">(</span>    0/    root<span class="o">)</span>
Access: 2021-04-20 13:11:46.772302006 +0000
Modify: 2020-01-16 20:39:11.000000000 +0000
Change: 2021-11-29 23:34:34.304638987 +0000
 Birth: -
</code></pre></td></tr></table>
</div>
</div><p>You can also use <code>+</code> and <code>-</code> for <code>-atime</code>, <code>-mtime</code> or <code>-ctime</code> to represents &ldquo;greater than&rdquo; and &ldquo;small than&rdquo;.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ sudo find /var  -atime -2 -atime +0 <span class="p">|</span> wc
     <span class="m">63</span>      <span class="m">63</span>    <span class="m">3554</span>
</code></pre></td></tr></table>
</div>
</div><p>Notice that <code>+</code> means &ldquo;greater than&rdquo; instead of &ldquo;greater than or equal to&rdquo;, and the same to <code>-</code>. So when we specify <code>-atime -2 -atime +0</code> what we mean is the files accessed <strong>one day ago but within two days</strong>. So if you specify <code>-atime -1 -atime +0</code>, you will find nothing, because it means one day ago but within one day. It is an emptyset.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ sudo find /var  -atime -1 -atime +0 <span class="p">|</span> wc
      <span class="m">0</span>       <span class="m">0</span>       <span class="m">0</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="-amin--mmin--cmin"><code>-amin</code>, <code>-mmin</code>, <code>-cmin</code></h3>
<p>If you want to search by <strong>minute</strong> instead of day use the <code>-amin</code>, <code>mmin</code> or <code>cmin</code> options. For example, <code>-mmin -60</code> will find the files that are modified within an hour.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ find . -mmin -120
.
./dir1
./dir1/dir2
./dir1/dir2/dir3
./dir1/dir2/dir3/dir1
./projects
./projects/report.txt
./.bash_history
</code></pre></td></tr></table>
</div>
</div><p>So these files (directory is also file) has just been modified within 2 hours.</p>
<h3 id="-user--group"><code>-user</code>, <code>-group</code></h3>
<p>To search by owner use the <code>-user</code> option and to search by group, use the <code>-group</code> option.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ sudo cp -rp /var/log ~
ubuntu@ip-172-31-87-26:~$ ls -l
total <span class="m">20</span>
drwxrwxr-x <span class="m">3</span> ubuntu ubuntu <span class="m">4096</span> Apr <span class="m">22</span> 12:47 dir1
drwxrwxr-x <span class="m">2</span> ubuntu ubuntu <span class="m">4096</span> Apr <span class="m">21</span> 11:40 dir2
drwxrwxr-x <span class="m">9</span> root   syslog <span class="m">4096</span> Apr <span class="m">22</span> 00:00 log
-rw-rw-r-- <span class="m">1</span> ubuntu ubuntu    <span class="m">0</span> Apr <span class="m">22</span> 09:51 ls.txt
-rw-rw-r-- <span class="m">1</span> ubuntu ubuntu   <span class="m">61</span> Apr <span class="m">22</span> 10:04 mac.txt
drwxrwxr-x <span class="m">2</span> ubuntu ubuntu <span class="m">4096</span> Apr <span class="m">22</span> 12:40 projects
ubuntu@ip-172-31-87-26:~$ sudo find . -user root -type d
./log
./log/unattended-upgrades
./log/dist-upgrade
./log/journal
./log/journal/d0b8b5a439b34eb9b32ecd640e8efcec
./log/apt
./log/private
./log/amazon
./log/amazon/ssm
./log/amazon/ssm/audits
ubuntu@ip-172-31-87-26:~$ sudo find . -group syslog -type d
./log

</code></pre></td></tr></table>
</div>
</div><h3 id="-not"><code>-not</code></h3>
<p>To negate an option, use <code>-not</code> before the option.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ sudo find . -not -user root -type d
.
./dir1
./dir1/dir2
./dir1/dir2/dir3
./dir1/dir2/dir3/dir1
./.ssh
./.cache
./projects
./dir2
./log/landscape
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ sudo find -not -type d -not -group syslog <span class="p">|</span> wc
     <span class="m">44</span>      <span class="m">44</span>    <span class="m">1062</span>
ubuntu@ip-172-31-87-26:~$ sudo find -not -perm <span class="m">755</span> <span class="p">|</span>wc
     <span class="m">60</span>      <span class="m">60</span>    <span class="m">1315</span>
ubuntu@ip-172-31-87-26:~$ ls -l ./ls.txt
-rw-rw-r-- <span class="m">1</span> ubuntu ubuntu <span class="m">0</span> Apr <span class="m">22</span> 09:51 ./ls.txt
</code></pre></td></tr></table>
</div>
</div><h3 id="-exec--ok"><code>-exec</code>, <code>-ok</code></h3>
<p>Sometimes you want to operate or execute a command on the files that are found. There‚Äôs the <code>-exec</code> option, which comes from execute, that does that. This option will run the following command on each file found by <code>find</code>.</p>
<p>For example, I copy if I want to see the last 3 lines of of the files in the <code>~</code> that are modified in the last 24 hours. I can run:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">sudo find ~ -type f -mtime <span class="m">0</span> -exec tail -n3 <span class="o">{}</span> <span class="se">\;</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li><code>sudo</code>: There are protected files among the founded files, so we need switch to root user;</li>
<li><code>find ~ -type f -mtime 0</code>: just as we talked before, find the files in <code>~</code> that are modified in 24h.</li>
<li><code>-exec</code>: run <code>tail</code> on each file found by find.</li>
<li><code>tail -n3 {}</code>: the pair of curly braces will expand to the file (&rsquo;s absolute path) found by the find command.</li>
<li><code>\;</code>: The command after -exec ends when backslash semicolon appears; that&rsquo;s always there at the end, the syntax of this construction.</li>
</ul>
<p>Let&rsquo;s do another example. I want to back up or make a copy of all configuration files from <code>/etc</code> that were modified in the last week.</p>
<p>For each file found by the <code>find</code> command, the <code>cp</code> command is executed. <code>cp</code> simply requires at least 2 arguments: a source and the destination; the source will be the file found by <code>find</code> (which is represented by the pair of curly braces) and the destination, the <code>/root/backup</code> directory.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ sudo mkdir /root/backup
ubuntu@ip-172-31-87-26:~$ sudo find /etc -mtime -7 -type f -exec cp <span class="o">{}</span> /root/backup <span class="se">\;</span>
ubuntu@ip-172-31-87-26:~$ sudo ls /root/backup
01autoremove-kernels  shadow  snap-snapd-15534.mount
ubuntu@ip-172-31-87-26:~$ sudo ls -l /root/backup
total <span class="m">12</span>
-r--r--r-- <span class="m">1</span> root root <span class="m">1874</span> Apr <span class="m">25</span> 02:42 01autoremove-kernels
-rw-r----- <span class="m">1</span> root root <span class="m">1067</span> Apr <span class="m">25</span> 02:42 shadow
-rw-r--r-- <span class="m">1</span> root root  <span class="m">285</span> Apr <span class="m">25</span> 02:42 snap-snapd-15534.mount
</code></pre></td></tr></table>
</div>
</div><p>Note that there is also the <code>-ok</code> option, which does the same is <code>-exec</code>, but it will ask the user first. If the user agrees, it runs the command that follows. Otherwise it just returns false.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ sudo find /etc -mtime -7 -type f -ok cp <span class="o">{}</span> /root/backup <span class="se">\;</span>&lt; cp ... /etc/apt/apt.conf.d/01autoremove-kernels &gt; ? y
&lt; cp ... /etc/systemd/system/snap-snapd-15534.mount &gt; ? y
&lt; cp ... /etc/shadow &gt; ? y
ubuntu@ip-172-31-87-26:~$
</code></pre></td></tr></table>
</div>
</div><h2 id="grep-command"><code>grep</code> command</h2>
<p>The <code>grep</code> command searches in a text file or output of another command for a pattern referenced to as a regular expression and prints out all lines that contain the pattern. The syntax of <code>grep</code> is</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">grep <span class="o">[</span>OPTION...<span class="o">]</span> PATTERNS <span class="o">[</span>FILE...<span class="o">]</span>
</code></pre></td></tr></table>
</div>
</div><p>So to search for a pattern in a file you write <code>grep</code>, You need specify some desired options optionally, the pattern to search for and the name of the file as a correct absolute or relative path.</p>
<p>For example, I‚Äôm searching in the configuration file of the ssh client, <code>/etc/ssh/ssh_config</code>, for the string &ldquo;user&rdquo;. And it displayed all the lines that contained the string user.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ grep user /etc/ssh/ssh_config
<span class="c1"># users, and the values can be changed in per-user configuration files</span>
<span class="c1">#  2. user-specific file</span>
</code></pre></td></tr></table>
</div>
</div><p>If the pattern contains spaces, you should enclose it in <strong>quotes</strong>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ grep <span class="s2">&#34;command line&#34;</span> /etc/ssh/ssh_config
<span class="c1"># or on the command line.</span>
<span class="c1">#  1. command line options</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="-i-1"><code>-i</code></h3>
<p>To ignore the latter case, use the <code>-i</code> option.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ grep SSH /etc/ssh/ssh_config
ubuntu@ip-172-31-87-26:~$ grep -i SSH /etc/ssh/ssh_config
<span class="c1"># This is the ssh client system-wide configuration file.  See</span>
<span class="c1"># ssh_config(5) for more information.  This file provides defaults for</span>
<span class="c1"># ssh_config(5) man page.</span>
Include /etc/ssh/ssh_config.d/*.conf
<span class="c1">#   IdentityFile ~/.ssh/id_rsa</span>
<span class="c1">#   IdentityFile ~/.ssh/id_dsa</span>
<span class="c1">#   IdentityFile ~/.ssh/id_ecdsa</span>
<span class="c1">#   IdentityFile ~/.ssh/id_ed25519</span>
<span class="c1">#   MACs hmac-md5,hmac-sha1,umac-64@openssh.com</span>
<span class="c1">#   ProxyCommand ssh -q -W %h:%p gateway.example.com</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="-n"><code>-n</code></h3>
<p>To print the line numbers, where the pattern was found in the file, use the <code>-n</code> option.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ grep -in SSH /etc/ssh/ssh_config
2:# This is the ssh client system-wide configuration file.  See
3:# ssh_config<span class="o">(</span>5<span class="o">)</span> <span class="k">for</span> more information.  This file provides defaults <span class="k">for</span>
17:# ssh_config<span class="o">(</span>5<span class="o">)</span> man page.
19:Include /etc/ssh/ssh_config.d/*.conf
36:#   IdentityFile ~/.ssh/id_rsa
37:#   IdentityFile ~/.ssh/id_dsa
38:#   IdentityFile ~/.ssh/id_ecdsa
39:#   IdentityFile ~/.ssh/id_ed25519
42:#   MACs hmac-md5,hmac-sha1,umac-64@openssh.com
48:#   ProxyCommand ssh -q -W %h:%p gateway.example.com
</code></pre></td></tr></table>
</div>
</div><h3 id="-w"><code>-w</code></h3>
<p>To search for whole words, use the <code>-w</code> option.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ grep -inw  SSH /etc/ssh/ssh_config
2:# This is the ssh client system-wide configuration file.  See
19:Include /etc/ssh/ssh_config.d/*.conf
36:#   IdentityFile ~/.ssh/id_rsa
37:#   IdentityFile ~/.ssh/id_dsa
38:#   IdentityFile ~/.ssh/id_ecdsa
39:#   IdentityFile ~/.ssh/id_ed25519
48:#   ProxyCommand ssh -q -W %h:%p gateway.example.com
</code></pre></td></tr></table>
</div>
</div><p>You can see the 42 line which contains &ldquo;openssh&rdquo; has been ignored.</p>
<h3 id="-v"><code>-v</code></h3>
<p>To invert the sense of matching, so to select and non matching lines, use the <code>-v</code> option; v comes from inverse. So the lines that do not contain the letter &ldquo;a&rdquo;:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ grep -inv a /etc/ssh/ssh_config
1:
6:
9:#  2. user-specific file
10:#  3. system-wide file
14:
18:
19:Include /etc/ssh/ssh_config.d/*.conf
20:
21:Host *
32:#   CheckHostIP yes
34:#   ConnectTimeout <span class="m">0</span>
39:#   IdentityFile ~/.ssh/id_ed25519
40:#   Port <span class="m">22</span>
44:#   Tunnel no
49:#   RekeyLimit 1G 1h
</code></pre></td></tr></table>
</div>
</div><h3 id="-a"><code>-a</code></h3>
<p>In a binary file as if it were a text file, use the <code>-a</code> option. For example, the executable file is in binary:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ which ls
/usr/bin/ls
ubuntu@ip-172-31-87-26:~$ grep <span class="nb">help</span> /usr/bin/ls
Binary file /usr/bin/ls matches
ubuntu@ip-172-31-87-26:~$ grep -a <span class="nb">help</span> /usr/bin/ls <span class="p">|</span> tail -n <span class="m">1</span>
General <span class="nb">help</span> using GNU software: &lt;https://www.gnu.org/gethelp/&gt;
</code></pre></td></tr></table>
</div>
</div><h3 id="-r-1"><code>-R</code></h3>
<p>To search recursively in the directory and search for the pattern in every text file in that directory and all its subdirectories, use the <code>-R</code> option. And it displayed all files that contain that string.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ sudo grep -R 127.0.0.1 /etc
Binary file /etc/alternatives/rlogin matches
Binary file /etc/alternatives/rsh matches
/etc/security/access.conf:#+:root:127.0.0.1
/etc/hosts:127.0.0.1 localhost
/etc/dhcp/dhclient.conf:#prepend domain-name-servers 127.0.0.1<span class="p">;</span>
/etc/dhcp/dhclient.conf:#  option domain-name-servers 127.0.0.1<span class="p">;</span>
/etc/cloud/templates/ntp.conf.debian.tmpl:restrict 127.0.0.1
/etc/cloud/templates/ntp.conf.sles.tmpl:restrict 127.0.0.1
/etc/cloud/templates/hosts.alpine.tmpl:127.0.0.1 localhost localhost.localdomain
/etc/cloud/templates/hosts.alpine.tmpl:127.0.0.1 localhost4 localhost4.localdomain4
/etc/cloud/templates/ntp.conf.fedora.tmpl:restrict 127.0.0.1 
/etc/cloud/templates/hosts.suse.tmpl:127.0.0.1 localhost.localdomain localhost
/etc/cloud/templates/hosts.suse.tmpl:127.0.0.1 localhost4.localdomain4 localhost4
/etc/cloud/templates/ntp.conf.rhel.tmpl:restrict 127.0.0.1 
/etc/cloud/templates/ntp.conf.opensuse.tmpl:restrict 127.0.0.1
/etc/cloud/templates/hosts.photon.tmpl:127.0.0.1 <span class="o">{{</span>fqdn<span class="o">}}</span> <span class="o">{{</span>hostname<span class="o">}}</span>
/etc/cloud/templates/hosts.photon.tmpl:127.0.0.1 localhost.localdomain localhost
/etc/cloud/templates/hosts.photon.tmpl:127.0.0.1 localhost4.localdomain4 localhost4
/etc/cloud/templates/hosts.debian.tmpl:127.0.0.1 localhost
/etc/cloud/templates/ntp.conf.ubuntu.tmpl:restrict 127.0.0.1
/etc/cloud/templates/hosts.redhat.tmpl:127.0.0.1 <span class="o">{{</span>fqdn<span class="o">}}</span> <span class="o">{{</span>hostname<span class="o">}}</span>
/etc/cloud/templates/hosts.redhat.tmpl:127.0.0.1 localhost.localdomain localhost
/etc/cloud/templates/hosts.redhat.tmpl:127.0.0.1 localhost4.localdomain4 localhost4
/etc/cloud/templates/ntp.conf.photon.tmpl:restrict 127.0.0.1
/etc/cloud/templates/hosts.freebsd.tmpl:127.0.0.1 <span class="o">{{</span>fqdn<span class="o">}}</span> <span class="o">{{</span>hostname<span class="o">}}</span>
/etc/cloud/templates/hosts.freebsd.tmpl:127.0.0.1 localhost.localdomain localhost
/etc/cloud/templates/hosts.freebsd.tmpl:127.0.0.1 localhost4.localdomain4 localhost4
ubuntu@ip-172-31-87-26:~$ 
</code></pre></td></tr></table>
</div>
</div><h3 id="-s--c"><code>-s</code>, <code>-c</code></h3>
<p>To suppress error messages about the nonexisting or unreadable files, use <code>-s</code> option. If you just want to see the number of the matches use the <code>-c</code> option. Of course, You could get the same result by using a pipe and a <code>wc -l</code> command.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ grep -invc a /etc/ssh/ssh_config
<span class="m">15</span>
ubuntu@ip-172-31-87-26:~$ grep -inv a /etc/ssh/ssh_config <span class="p">|</span> wc -l
<span class="m">15</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="-a--b--c"><code>-A</code>, <code>-B</code>, <code>-C</code></h3>
<p>The <code>grep</code> command can be used to <strong>search in the output of another command</strong> as well. We will talk about this in the following subsections.</p>
<p>For example, I want to search for &ldquo;ether&rdquo; in the outcome of <code>ifconfig</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ ifconfig <span class="p">|</span> grep ether
        ether 12:b8:5e:3f:aa:45  txqueuelen <span class="m">1000</span>  <span class="o">(</span>Ethernet<span class="o">)</span>
</code></pre></td></tr></table>
</div>
</div><p>And there&rsquo;s a single line. To see a context, which means a few after before and before the match, use <code>-A</code> and <code>-B</code> with a number respectively:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ ifconfig <span class="p">|</span> grep -A <span class="m">1</span> -B <span class="m">2</span> ether
        inet 172.31.87.26  netmask 255.255.240.0  broadcast 172.31.95.255
        inet6 fe80::10b8:5eff:fe3f:aa45  prefixlen <span class="m">64</span>  scopeid 0x20&lt;link&gt;
        ether 12:b8:5e:3f:aa:45  txqueuelen <span class="m">1000</span>  <span class="o">(</span>Ethernet<span class="o">)</span>
        RX packets <span class="m">617506</span>  bytes <span class="m">506492068</span> <span class="o">(</span>506.4 MB<span class="o">)</span>
</code></pre></td></tr></table>
</div>
</div><p>You can also use <code>-C</code> from context and the number and it will print out the same number of lines before and after the match.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ ifconfig <span class="p">|</span> grep -C <span class="m">2</span> ether
        inet 172.31.87.26  netmask 255.255.240.0  broadcast 172.31.95.255
        inet6 fe80::10b8:5eff:fe3f:aa45  prefixlen <span class="m">64</span>  scopeid 0x20&lt;link&gt;
        ether 12:b8:5e:3f:aa:45  txqueuelen <span class="m">1000</span>  <span class="o">(</span>Ethernet<span class="o">)</span>
        RX packets <span class="m">617594</span>  bytes <span class="m">506500386</span> <span class="o">(</span>506.5 MB<span class="o">)</span>
        RX errors <span class="m">0</span>  dropped <span class="m">0</span>  overruns <span class="m">0</span>  frame <span class="m">0</span>
</code></pre></td></tr></table>
</div>
</div><p>Another common example is to check what program is listening on a specific port. To display all ports run: <code>netstat</code> with some options:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ sudo netstat -tupan
Active Internet connections <span class="o">(</span>servers and established<span class="o">)</span>
Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name    
tcp        <span class="m">0</span>      <span class="m">0</span> 127.0.0.53:53           0.0.0.0:*               LISTEN      27691/systemd-resol 
tcp        <span class="m">0</span>      <span class="m">0</span> 0.0.0.0:22              0.0.0.0:*               LISTEN      648/sshd: /usr/sbin 
tcp        <span class="m">0</span>      <span class="m">0</span> 172.31.87.26:22         61.177.172.142:19913    SYN_RECV    -                   
tcp        <span class="m">0</span>      <span class="m">0</span> 172.31.87.26:22         61.177.172.142:30233    SYN_RECV    -                   
tcp        <span class="m">0</span>      <span class="m">0</span> 172.31.87.26:22         61.177.172.142:32886    SYN_RECV    -                   
tcp        <span class="m">0</span>    <span class="m">340</span> 172.31.87.26:22         174.139.202.93:40218    ESTABLISHED 119654/sshd: ubuntu 
tcp6       <span class="m">0</span>      <span class="m">0</span> :::22                   :::*                    LISTEN      648/sshd: /usr/sbin 
udp        <span class="m">0</span>      <span class="m">0</span> 127.0.0.53:53           0.0.0.0:*                           27691/systemd-resol 
udp        <span class="m">0</span>      <span class="m">0</span> 172.31.87.26:68         0.0.0.0:*                           27686/systemd-netwo 
</code></pre></td></tr></table>
</div>
</div><p>It has displayed all open ports; and to check if there is something that&rsquo;s listening on port 53 and port 80, filter the output using <code>grep</code> like this:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ sudo netstat -tupan <span class="p">|</span> grep <span class="m">53</span>
tcp        <span class="m">0</span>      <span class="m">0</span> 127.0.0.53:53           0.0.0.0:*               LISTEN      27691/systemd-resol 
tcp        <span class="m">0</span>      <span class="m">0</span> 172.31.87.26:22         61.177.172.142:53550    SYN_RECV    -                   
udp        <span class="m">0</span>      <span class="m">0</span> 127.0.0.53:53           0.0.0.0:*                           27691/systemd-resol 
ubuntu@ip-172-31-87-26:~$ sudo netstat -tupan <span class="p">|</span> grep <span class="m">80</span>
ubuntu@ip-172-31-87-26:~$ 
</code></pre></td></tr></table>
</div>
</div><p>So there are some processes that listen on port 53, and there is no process listening on port 80.</p>
<p>Let&rsquo;s see the last example: store all files' name (exclude the directories') inside a directory into a file.</p>
<ul>
<li><code>ls -RF</code>: <code>-R</code> means list the contents recrusively, <code>-F</code> adds the type symbol at the end of item&rsquo;s name, for example, the item&rsquo;s end with <code>/</code> is a directory.</li>
<li><code>grep -v /</code>: ignore the directories in <code>/var/log</code></li>
<li><code>grep -v &quot;^$&quot;</code>: ignore the white space line</li>
<li><code>sort</code>: sort by file name in alphabeta ascending order.</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ sudo ls -RF /var/log <span class="p">|</span> grep -v / <span class="p">|</span> grep -v <span class="s2">&#34;^</span>$<span class="s2">&#34;</span> <span class="p">|</span> sort &gt; files
ubuntu@ip-172-31-87-26:~$ cat files
alternatives.log
amazon-ssm-agent-audit-2022-04-14
amazon-ssm-agent.log
auth.log
auth.log.1
auth.log.2.gz
btmp
cloud-init-output.log
cloud-init.log
dmesg
dpkg.log
eipp.log.xz
hibernate.log
history.log
kern.log
kern.log.1
kern.log.2.gz
lastlog
sysinfo.log
syslog
syslog.1
syslog.2.gz
syslog.3.gz
syslog.4.gz
syslog.5.gz
syslog.6.gz
syslog.7.gz
system.journal
term.log
ubuntu-advantage-timer.log
unattended-upgrades-dpkg.log
unattended-upgrades-shutdown.log
unattended-upgrades.log
user-1000.journal
wtmp
</code></pre></td></tr></table>
</div>
</div><h2 id="strings-command"><code>strings</code> command</h2>
<p>The <code>grep</code> command searches for strings in text files. However, not only text files contain ASCII characters. Binary files such as executables may contain strings in human-readable text. In the compilation process ascii characters are embedded into the binary files and sometimes, when an application is deployed, some ASCII text is packed into the binary file by the developer.</p>
<p>This contains useful information about the binary, like a short help or copyright information. There are also binary files used by different applications that embed sensitive information as credentials. The <code>strings</code> command extracts printable characters from binary files. Before run <code>springs</code>, we need install it on ubuntu:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">sudo apt install binutils
</code></pre></td></tr></table>
</div>
</div><p>Let&rsquo;s see the printable characters from the <code>ls</code> command.</p>
<p><img src="https://raw.githubusercontent.com/floating15/img/main/202204251244956.gif"
	
	
	
	loading="lazy"
	
	
></p>
<p>These are the ASCII characters embedded into <code>ls</code>. And then we can use pipe and <code>grep</code> or <code>less</code> to find some specific strings:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ strings /usr/bin/ls <span class="p">|</span> grep <span class="nb">help</span>
<span class="c1"># Configuration file for dircolors, a utility to help you set the</span>
%s online help: &lt;%s&gt;
<span class="nb">help</span>
Try <span class="s1">&#39;%s --help&#39;</span> <span class="k">for</span> more information.
      --help     display this <span class="nb">help</span> and <span class="nb">exit</span>
General <span class="nb">help</span> using GNU software: &lt;https://www.gnu.org/gethelp/&gt;
</code></pre></td></tr></table>
</div>
</div><p>or</p>
<p><img src="https://raw.githubusercontent.com/floating15/img/main/202204251254078.gif"
	
	
	
	loading="lazy"
	
	
></p>
<h2 id="compendium-1">Compendium</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="c1">##########################</span>
<span class="c1">## Finding Files (find, locate)</span>
<span class="c1">##########################</span>
 
<span class="c1">## LOCATE ##</span>
<span class="c1"># updating the locate db</span>
sudo updatedb
 
<span class="c1"># displaying statistics</span>
locate -S
 
<span class="c1"># finding file by name</span>
locate filename <span class="c1"># =&gt; filename is expanded to *filename*</span>
locate -i filename <span class="c1"># =&gt; the filename is case insensitive</span>
locate -b <span class="s1">&#39;\filename&#39;</span> <span class="c1"># =&gt; finding by exact name</span>
 
<span class="c1"># finding using the basename</span>
locate -b filename
 
<span class="c1"># finding using regular expressions</span>
locate -r <span class="s1">&#39;regex&#39;</span>
 
<span class="c1"># checking that the file exists</span>
locate -e filename
 
<span class="c1"># showing command path</span>
which <span class="nb">command</span>
which -a <span class="nb">command</span>
 
 
<span class="c1">## FIND ##</span>
find PATH OPTIONS
 
<span class="c1"># Example: find ~ -type f -size +1M # =&gt; finding all files in ~ bigger than 1 MB</span>
 
<span class="c1">## Options:</span>
<span class="c1"># -type f, d, l, s, p</span>
<span class="c1"># -name filename</span>
<span class="c1"># -iname filename # =&gt; case-insensitive</span>
<span class="c1"># -size n, +n, -n</span>
<span class="c1"># -perm permissions</span>
<span class="c1"># -links n, +n, -n</span>
<span class="c1"># -atime n, -mtime n, ctime n</span>
<span class="c1"># -user owner</span>
<span class="c1"># -group group_owner</span>

<span class="c1">##########################</span>
<span class="c1">## Searching for text patterns (grep)</span>
<span class="c1">##########################</span>
 
grep <span class="o">[</span>OPTIONS<span class="o">]</span> pattern file
 
Options:
-n          <span class="c1"># =&gt; print line number</span>
-i          <span class="c1"># =&gt; case insensitive</span>
-v          <span class="c1"># inverse the match</span>
-w          <span class="c1"># search for whole words</span>
-a          <span class="c1"># search in binary files</span>
-R          <span class="c1"># search in directory recursively</span>
-c          <span class="c1"># display only the no. of matches</span>
-C n        <span class="c1"># display a context (n lines before and after the match)</span>
 
 
<span class="c1"># printing ASCII chars from a binary file</span>
strings binary_file

</code></pre></td></tr></table>
</div>
</div><h1 id="compare">Compare</h1>
<h2 id="cmp-command"><code>cmp</code> command</h2>
<p>This is especially useful when you want to compare either the output of the same command at different moments or the differences between a back up configuration file and the one currently used by the system.</p>
<p>To see if there was any difference between the two files, you can run the <code>cmp</code> command:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ ifconfig &gt; a
ubuntu@ip-172-31-87-26:~$ ping 8.8.8.8
PING 8.8.8.8 <span class="o">(</span>8.8.8.8<span class="o">)</span> 56<span class="o">(</span>84<span class="o">)</span> bytes of data.
<span class="m">64</span> bytes from 8.8.8.8: <span class="nv">icmp_seq</span><span class="o">=</span><span class="m">1</span> <span class="nv">ttl</span><span class="o">=</span><span class="m">50</span> <span class="nv">time</span><span class="o">=</span>1.01 ms
<span class="m">64</span> bytes from 8.8.8.8: <span class="nv">icmp_seq</span><span class="o">=</span><span class="m">2</span> <span class="nv">ttl</span><span class="o">=</span><span class="m">50</span> <span class="nv">time</span><span class="o">=</span>0.848 ms
<span class="m">64</span> bytes from 8.8.8.8: <span class="nv">icmp_seq</span><span class="o">=</span><span class="m">3</span> <span class="nv">ttl</span><span class="o">=</span><span class="m">50</span> <span class="nv">time</span><span class="o">=</span>0.900 ms
<span class="m">64</span> bytes from 8.8.8.8: <span class="nv">icmp_seq</span><span class="o">=</span><span class="m">4</span> <span class="nv">ttl</span><span class="o">=</span><span class="m">50</span> <span class="nv">time</span><span class="o">=</span>0.879 ms
<span class="m">64</span> bytes from 8.8.8.8: <span class="nv">icmp_seq</span><span class="o">=</span><span class="m">5</span> <span class="nv">ttl</span><span class="o">=</span><span class="m">50</span> <span class="nv">time</span><span class="o">=</span>0.981 ms
^C
--- 8.8.8.8 ping statistics ---
<span class="m">5</span> packets transmitted, <span class="m">5</span> received, 0% packet loss, <span class="nb">time</span> 4005ms
rtt min/avg/max/mdev <span class="o">=</span> 0.848/0.924/1.012/0.062 ms
ubuntu@ip-172-31-87-26:~$ ifconfig &gt; b
ubuntu@ip-172-31-87-26:~$ cmp a b
a b differ: byte 291, line <span class="m">5</span>
</code></pre></td></tr></table>
</div>
</div><p><code>cmp</code> compares the files byte by byte and displays the location of the first mismatch. It doesn&rsquo;t see how the files differ and if they are identical, no message is displayed. Note that cmp can be used to compare <strong>binary</strong> files as well.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ cp /usr/bin/ls .
ubuntu@ip-172-31-87-26:~$ cmp ls .usr/bin/ls
cmp: .usr/bin/ls: No such file or directory
ubuntu@ip-172-31-87-26:~$ cmp ls /usr/bin/ls
ubuntu@ip-172-31-87-26:~$ 
</code></pre></td></tr></table>
</div>
</div><p>So, they&rsquo;re identical, because nothing was displayed.</p>
<h2 id="sha256sum-command"><code>sha256sum</code> command</h2>
<p>Another way to compare 2 <strong>binary</strong> files to see if they are identical is to calculate and compare their hash. The hash is a unique cryptographic id for each file. To calculate the hashes of the ls files, use <code>sha256sum</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ sha256sum ls /usr/bin/ls
1e39354a6e481dac48375bfebb126fd96aed4e23bab3c53ed6ecf1c5e4d5736d  ls
1e39354a6e481dac48375bfebb126fd96aed4e23bab3c53ed6ecf1c5e4d5736d  /usr/bin/ls
ubuntu@ip-172-31-87-26:~$ <span class="nb">echo</span> <span class="s2">&#34;0&#34;</span> &gt;&gt; ls
ubuntu@ip-172-31-87-26:~$ sha256sum ls /usr/bin/ls
d70a063927fb3446e28b4001da6486250e1760fdf77aa7873ebfdf91cee5bf69  ls
1e39354a6e481dac48375bfebb126fd96aed4e23bab3c53ed6ecf1c5e4d5736d  /usr/bin/ls
</code></pre></td></tr></table>
</div>
</div><p>Even a single bit were different, the hashes would be different. And they are not identical anymore:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ cmp ls /usr/bin/ls
cmp: EOF on /usr/bin/ls after byte 142144, in line <span class="m">448</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="diff-command"><code>diff</code> command</h2>
<p>Now, if you want to see exactly how they differ, you should run the <code>diff</code> command. It&rsquo;s used only for <strong>text</strong> files. Diff stands for difference and is used to display the differences in the files by comparing them line by line.</p>
<p>We now create two files <code>c</code> and <code>d</code>, and modify <code>d</code> at 3 places: change, delete and add respectively:</p>
<p><img src="https://raw.githubusercontent.com/floating15/img/main/202204251337761.gif"
	
	
	
	loading="lazy"
	
	
></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ diff c d
1c1
&lt; eth0: <span class="nv">flags</span><span class="o">=</span>4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu <span class="m">9001</span>
---
&gt; et10: <span class="nv">flags</span><span class="o">=</span>4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu <span class="m">9001</span>
14d13
&lt;         RX packets <span class="m">1406</span>  bytes <span class="m">136780</span> <span class="o">(</span>136.7 KB<span class="o">)</span>
18a18
&gt; ee
</code></pre></td></tr></table>
</div>
</div><p>You can see <code>diff</code> return 3 lines that be modified: <code>1c1</code>, <code>14d13</code> and <code>18a18</code></p>
<p>the number is showing us the line that differs. and the character <code>c</code>, <code>d</code> and <code>a</code> indicate that the line has been changed, deleted and added respectively. Lines preceded by a less than sign (<code>&lt;</code>) are lines from the first file, and <code>&gt;</code> are from the second.</p>
<p>You can see that <code>14d13</code> only has <code>&lt;</code>, because we delete the corresponging line in the second file; and <code>18a18</code> only has <code>&gt;</code> for the similar reason.</p>
<p>There are some useful options of the <code>diff</code> command like <code>-b</code> to ignore blank lines; <code>-w</code> to ignore white spaces; And <code>-i</code> do ignore case differences in file contents. And <code>-c</code> for a more detailed comparison. And <code>-y</code> to display the entire file&rsquo;s contents on 2 column side, the change, delete, add lines will be signed by <code>|</code>, <code>&gt;</code> and <code>&lt;</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ diff -y c d
eth0: <span class="nv">flags</span><span class="o">=</span>4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu <span class="m">9001</span>    <span class="p">|</span>	et10: <span class="nv">flags</span><span class="o">=</span>4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu <span class="m">9001</span>
        inet 172.31.87.26  netmask 255.255.240.0  broadcast 1	        inet 172.31.87.26  netmask 255.255.240.0  broadcast <span class="m">1</span>
        inet6 fe80::10b8:5eff:fe3f:aa45  prefixlen <span class="m">64</span>  scopei	        inet6 fe80::10b8:5eff:fe3f:aa45  prefixlen <span class="m">64</span>  scopei
        ether 12:b8:5e:3f:aa:45  txqueuelen <span class="m">1000</span>  <span class="o">(</span>Ethernet<span class="o">)</span>	        ether 12:b8:5e:3f:aa:45  txqueuelen <span class="m">1000</span>  <span class="o">(</span>Ethernet<span class="o">)</span>
        RX packets <span class="m">626456</span>  bytes <span class="m">509593982</span> <span class="o">(</span>509.5 MB<span class="o">)</span>		        RX packets <span class="m">626456</span>  bytes <span class="m">509593982</span> <span class="o">(</span>509.5 MB<span class="o">)</span>
        RX errors <span class="m">0</span>  dropped <span class="m">0</span>  overruns <span class="m">0</span>  frame 0		        RX errors <span class="m">0</span>  dropped <span class="m">0</span>  overruns <span class="m">0</span>  frame <span class="m">0</span>
        TX packets <span class="m">406778</span>  bytes <span class="m">108993151</span> <span class="o">(</span>108.9 MB<span class="o">)</span>		        TX packets <span class="m">406778</span>  bytes <span class="m">108993151</span> <span class="o">(</span>108.9 MB<span class="o">)</span>
        TX errors <span class="m">0</span>  dropped <span class="m">0</span> overruns <span class="m">0</span>  carrier <span class="m">0</span>  collisi	        TX errors <span class="m">0</span>  dropped <span class="m">0</span> overruns <span class="m">0</span>  carrier <span class="m">0</span>  collisi

lo: <span class="nv">flags</span><span class="o">=</span>73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536			lo: <span class="nv">flags</span><span class="o">=</span>73&lt;UP,LOOPBACK,RUNNING&gt;  mtu <span class="m">65536</span>
        inet 127.0.0.1  netmask 255.0.0.0			        inet 127.0.0.1  netmask 255.0.0.0
        inet6 ::1  prefixlen <span class="m">128</span>  scopeid 0x10&lt;host&gt;		        inet6 ::1  prefixlen <span class="m">128</span>  scopeid 0x10&lt;host&gt;
        loop  txqueuelen <span class="m">1000</span>  <span class="o">(</span>Local Loopback<span class="o">)</span>			        loop  txqueuelen <span class="m">1000</span>  <span class="o">(</span>Local Loopback<span class="o">)</span>
        RX packets <span class="m">1406</span>  bytes <span class="m">136780</span> <span class="o">(</span>136.7 KB<span class="o">)</span>	      &lt;
        RX errors <span class="m">0</span>  dropped <span class="m">0</span>  overruns <span class="m">0</span>  frame 0		        RX errors <span class="m">0</span>  dropped <span class="m">0</span>  overruns <span class="m">0</span>  frame <span class="m">0</span>
        TX packets <span class="m">1406</span>  bytes <span class="m">136780</span> <span class="o">(</span>136.7 KB<span class="o">)</span>		        TX packets <span class="m">1406</span>  bytes <span class="m">136780</span> <span class="o">(</span>136.7 KB<span class="o">)</span>
        TX errors <span class="m">0</span>  dropped <span class="m">0</span> overruns <span class="m">0</span>  carrier <span class="m">0</span>  collisi	        TX errors <span class="m">0</span>  dropped <span class="m">0</span> overruns <span class="m">0</span>  carrier <span class="m">0</span>  collisi

							      &gt;	ee
ubuntu@ip-172-31-87-26:~$ 
</code></pre></td></tr></table>
</div>
</div><h1 id="vim">Vim</h1>
<h2 id="intro">Intro</h2>
<p><code>vim</code> is a very powerful text editor and it offers extensive text editing options. To use <code>vim</code> on a file you type in <code>vim</code> and the name of the file using a correct, absolute or relative path. If the file already exists, wim will open it for editing. But if it doesn&rsquo;t exist, then wim will create the file.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ ifconfig &gt; a
ubuntu@ip-172-31-87-26:~$ vim a
</code></pre></td></tr></table>
</div>
</div><p><img src="https://raw.githubusercontent.com/floating15/img/main/202204261026964.png"
	
	
	
	loading="lazy"
	
	
></p>
<p>Vim is a model editor, it has three basic modes of operation:</p>
<ul>
<li>command mode</li>
<li>insert mode</li>
<li>last line modes.</li>
</ul>
<h3 id="command-mode">Command mode</h3>
<p>When you open a file in <code>vim</code>, you are in the command mode. In this mode, characters you type get interpreted as <strong>commands</strong>.</p>
<p>For example, <code>x</code> will delete the character currently under the cursor.</p>
<p><img src="https://raw.githubusercontent.com/floating15/img/main/202204261033584.gif"
	
	
	
	loading="lazy"
	
	
></p>
<p><code>r</code> will replace the character under the cursor.</p>
<p><img src="https://raw.githubusercontent.com/floating15/img/main/202204261036689.gif"
	
	
	
	loading="lazy"
	
	
></p>
<p>To get back to <strong>command mode</strong> from any other mode, just press <code>ESC</code> one or more times.</p>
<p><img src="https://raw.githubusercontent.com/floating15/img/main/202204261039312.gif"
	
	
	
	loading="lazy"
	
	
></p>
<blockquote>
<p>Tips: when you are in a mode and get stuck press a few times the escape key and it will take you to the command mode.</p>
</blockquote>
<h3 id="insert-mode">Insert mode</h3>
<p>To start writing text, as in a normal text editor, you need to enter into <strong>insert mode</strong>. To enter into insert mode from command mode press lowercase <code>i</code> and it will insert the text <strong>before the cursor</strong>. If you press the uppercase <code>I</code> it will start inserting the text at the <strong>beginning of the current line</strong>.</p>
<p>If you press <code>a</code>, <code>vim</code> will append the text <strong>after the cursor</strong>; an upper case <code>A</code> will make it append the text to <strong>the end of the current line</strong>.</p>
<p>If you press <code>o</code>, <code>vim</code> write the text on ** a new line below** the current line, and <code>O</code> to write on ** a new line above** the current line.</p>
<p><img src="https://raw.githubusercontent.com/floating15/img/main/202204261048531.gif"
	
	
	
	loading="lazy"
	
	
></p>
<blockquote>
<p>So in a nutshell, to enter the insert mood from command mode type <code>i</code>, <code>a</code> and <code>o</code>, both lower and upper case.</p>
</blockquote>
<h3 id="last-line-mode">Last line mode</h3>
<p>The 3rd <code>vim</code> mode is the <strong>last line mode</strong>; you can <strong>only</strong> get to the last line mode from command mode and to get into last line, you press the colon key <code>:</code> (<code>shift+;</code>), then colon character will appear at the beginning of the last line of the <code>vim</code> editor window and the cursor will be moved to that position.</p>
<p>From <code>vim</code> last line mode, you can do all sorts of things like saving the file (<code>w!+enter</code>), quitting the file without saving it (<code>q!+enter</code>) and quit with saving (<code>wq!+enter</code>).</p>
<p><img src="https://raw.githubusercontent.com/floating15/img/main/202204261054580.gif"
	
	
	
	loading="lazy"
	
	
></p>
<p>One of most useful shortcuts while in the <strong>command mode</strong> is to save and quit the file quickly and easily by typing <code>shift+z+shift+z</code> (<code>ZZ</code>).</p>
<p><img src="https://raw.githubusercontent.com/floating15/img/main/202204261056030.gif"
	
	
	
	loading="lazy"
	
	
></p>
<h2 id="more-on-vim">More on vim</h2>
<h3 id="run-shell-command">run shell command</h3>
<p>You can <strong>run a shell command</strong> from within your <code>vim</code> editor session at last line mode by:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">!&lt;command&gt;
</code></pre></td></tr></table>
</div>
</div><p>the outcome returned will be print in bash terminal.</p>
<p><img src="https://raw.githubusercontent.com/floating15/img/main/202204261119186.gif"
	
	
	
	loading="lazy"
	
	
></p>
<h3 id="search">search</h3>
<p>To <strong>search for a string forward</strong> in the <strong>command mode</strong> type:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">/&lt;string&gt; + enter
</code></pre></td></tr></table>
</div>
</div><p>and <strong>backword</strong> type:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">?&lt;string&gt; + enter
</code></pre></td></tr></table>
</div>
</div><p>Any matches in the current window will be highlighted. You can then navigate next matches with <code>n</code> and last matches with <code>N</code>. Go to the end of the file by typing capital <code>G</code>, and go to the start of the file by <code>gg</code>. These work exactly the same as for the less command.</p>
<p><img src="https://raw.githubusercontent.com/floating15/img/main/202204261128632.gif"
	
	
	
	loading="lazy"
	
	
></p>
<h3 id="jump-to-word">jump to word</h3>
<p>Another quick way to find (and jump to) the <strong>next</strong> occurrence of the <strong>word under cursor</strong> in <strong>command mode</strong> is to press an asterisk <code>*</code>; to find (and jump to) the <strong>last</strong> occurrence of the word under cursor, press hash <code>#</code>.</p>
<p><img src="https://raw.githubusercontent.com/floating15/img/main/202204261137601.gif"
	
	
	
	loading="lazy"
	
	
></p>
<h3 id="jump-to-line">jump to line</h3>
<p>If you want to move to a specific line in the <strong>last line mode</strong>, type the line number and press enter. This is useful when you get an error in the shell script or configuration file and it says that the error is on a specific line.</p>
<p>To move to the end of the file type capital <code>G</code> and to move to the beginning of the file type <code>gg</code> in the <strong>command mode</strong>. Or you can type 1 in the last line mode to jump the the start.</p>
<h3 id="replace">replace</h3>
<p>To search for a pattern and replace all occurrences in the <strong>last line mode</strong>, write</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">%s/&lt;str1&gt;/&lt;str2&gt;/g + enter
</code></pre></td></tr></table>
</div>
</div><p>in the last line. For example, to replace all &ldquo;err&rdquo; to &ldquo;ERR&rdquo;, write <code>%s/err/ERR/g</code>:</p>
<p><img src="https://raw.githubusercontent.com/floating15/img/main/202204261143118.gif"
	
	
	
	loading="lazy"
	
	
></p>
<h3 id="undo">undo</h3>
<p>Now, I think that was a mistake and I can <strong>undo till the last saved version</strong> of the document by typing <code>e! + enter</code> in the <strong>last line mode</strong>.</p>
<p>Note that it didn&rsquo;t undo only your last operation, but up till the moment you&rsquo;ve last saved the file.</p>
<p><img src="https://raw.githubusercontent.com/floating15/img/main/202204261157812.gif"
	
	
	
	loading="lazy"
	
	
></p>
<p>To undo the last operation only in <strong>command mode</strong> type <code>u</code>. (This is equivalent to <code>ctrl+z</code> in a graphical text editor). And to redo the previous operation type <code>control + r</code>.</p>
<h3 id="cut-copy-and-paste">cut, copy and paste</h3>
<p>In <strong>command mode</strong>, press <code>dd</code> to cut the line. Press capital <code>P</code> to paste before the cursor or small <code>p</code> to paste after.</p>
<p>To cut more than one line, typed the number and then <code>dd</code>. For example, if you wan to cut 10 lines below the cursor then you type <code>10dd + enter</code> in command mode.</p>
<p><img src="https://raw.githubusercontent.com/floating15/img/main/202204261205915.gif"
	
	
	
	loading="lazy"
	
	
></p>
<p>To copy a text, the first step is to position the cursor where you want to begin copying, press</p>
<ul>
<li>lowercase <code>v</code> to select characters (letter),</li>
<li>uppercase <code>V</code> to select whole line</li>
<li><code>control + v</code> to select rectangular blocks.</li>
</ul>
<p>press <code>v</code> again to unselect. Then use of the <code>arrow</code> keys to define the selection. After selecting the text press <code>y</code> to copy. <code>y</code> stands for Young in recent which in other editors is usually called Copy.</p>
<p><img src="https://raw.githubusercontent.com/floating15/img/main/202204261213259.gif"
	
	
	
	loading="lazy"
	
	
></p>
<h3 id="config">config</h3>
<p>In the <strong>last line mode</strong>, you can run a many vim configuration commands. For example,  to <strong>show line numbers</strong> in the current editor window, write</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="nb">set</span> nu + enter
</code></pre></td></tr></table>
</div>
</div><p>in the last line. And it has displayed the line numbers. if you don&rsquo;t want to display the line number (for example, when you want to copy and paste from vim into another editor and don&rsquo;t want to take the line number as well), write</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="nb">set</span> nonu
</code></pre></td></tr></table>
</div>
</div><p>Another useful feature is <strong>syntax highlighting</strong>. To enable or disable syntax colors in the last line mode run</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">syntax on
<span class="c1"># or</span>
syntax off
</code></pre></td></tr></table>
</div>
</div><p>Note that these changes are not permanent if you exit vim and then open it again. To make the changes permanent in the user&rsquo;s home directory create or edit a file called <code>.vimrc</code>, and write these commands in it. So run</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ vim .vimrc
</code></pre></td></tr></table>
</div>
</div><p>and add the commands.</p>
<p><img src="https://raw.githubusercontent.com/floating15/img/main/202204261218468.gif"
	
	
	
	loading="lazy"
	
	
></p>
<h3 id="multi-files">multi files</h3>
<p>Let&rsquo;s see how to work with multiple files at once, this is useful when you want to copy and paste between files or to visually compare the file contents. You can open more files like</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">vim &lt;file1&gt; &lt;file2&gt;
</code></pre></td></tr></table>
</div>
</div><p>vim will dislplay the first file, but you can move to the next one by typing <code>n</code> and get back by <code>N</code> in the <strong>last line mode</strong>.</p>
<p><img src="https://raw.githubusercontent.com/floating15/img/main/202204261257377.gif"
	
	
	
	loading="lazy"
	
	
></p>
<p>Another way to work with multiple files at the same time is to use the <code>-o</code> option, which will split the window and open a window for each file. And you can move between windows by pressing <code>control + w</code> in command mode.</p>
<p><img src="https://raw.githubusercontent.com/floating15/img/main/202204261300787.gif"
	
	
	
	loading="lazy"
	
	
></p>
<p>Sometimes it&rsquo;s useful to view to files side by side and see the differences between them. This is especially useful when you change some configuration options of a service. To do that, you can use the <code>-d</code> option or use <code>vimdiff</code> command. And you can move between files by using <code>control + w</code>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">vim -d &lt;file1&gt; &lt;file2&gt;
<span class="c1"># is same as</span>
vimdiff &lt;file1&gt; &lt;file2&gt;
</code></pre></td></tr></table>
</div>
</div><p><img src="https://raw.githubusercontent.com/floating15/img/main/202204261302591.gif"
	
	
	
	loading="lazy"
	
	
></p>
<h3 id="swap-file">swap file</h3>
<p>If you exit vim without properly closing it, so without using a command or a shortcut, like closing the terminal or pressing <code>control +z</code>, the next time when you open the same file, you&rsquo;ll be presented with a message like</p>
<p><img src="https://raw.githubusercontent.com/floating15/img/main/202204261303278.png"
	
	
	
	loading="lazy"
	
	
></p>
<p>You can try to recover the file by pressing <code>R</code> and then saving it normally or you can simply delete the swap file that was created:</p>
<p><img src="https://raw.githubusercontent.com/floating15/img/main/202204261307838.png"
	
	
	
	loading="lazy"
	
	
></p>
<h2 id="compendium-2">Compendium</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="c1">##########################</span>
<span class="c1">## VIM</span>
<span class="c1">##########################</span>
 
Modes of operation: Command, Insert, and Last Line Modes.
VIM Config File: ~/.vimrc
 
<span class="c1"># Entering the Insert Mode from the Command Mode</span>
<span class="nv">i</span>  <span class="o">=</span>&gt; insert before the cursor
<span class="nv">I</span>  <span class="o">=</span>&gt; insert at the beginning of the line
<span class="nv">a</span>  <span class="o">=</span>&gt; insert after the cursor
<span class="nv">A</span>  <span class="o">=</span>&gt; insert at the end of the line
<span class="nv">o</span>  <span class="o">=</span>&gt; insert on the next line
 
<span class="c1"># Entering the Last Line Mode from the Command Mode</span>
:
 
<span class="c1"># Returning to Command Mode from Insert or Last Line Mode </span>
ESC
 
<span class="c1"># Shortcuts in Last Line Mode</span>
w!  <span class="o">=</span>&gt; write/save the file
q!  <span class="o">=</span>&gt; quit the file without saving
wq! <span class="o">=</span>&gt; save/write and quit
e!  <span class="o">=</span>&gt; undo to the last saved version of the file
<span class="nb">set</span> <span class="nv">nu</span> <span class="o">=</span>&gt; <span class="nb">set</span> line numbers
<span class="nb">set</span> <span class="nv">nonu</span>  <span class="o">=</span>&gt; <span class="nb">unset</span> line numbers
syntax on<span class="p">|</span>off
%s/search_string/replace_string/g
 
<span class="c1"># Shortcuts in Command Mode</span>
<span class="nv">x</span>   <span class="o">=</span>&gt; remove char under the cursor
<span class="nv">dd</span>  <span class="o">=</span>&gt; cut the current line
<span class="nv">5dd</span> <span class="o">=</span>&gt; cut <span class="m">5</span> lines
<span class="nv">ZZ</span>  <span class="o">=</span>&gt; save and quit
<span class="nv">u</span>   <span class="o">=</span>&gt; undo
<span class="nv">G</span>   <span class="o">=</span>&gt; move to the end of file
$   <span class="o">=</span>&gt; move to the end of line
<span class="m">0</span> or ^  <span class="o">=</span>&gt; move to the beginning of file
:n <span class="o">(</span>Ex :10<span class="o">)</span> <span class="o">=</span>&gt; move to line n
Shift+v     <span class="o">=</span>&gt; <span class="k">select</span> the current line
<span class="nv">y</span>           <span class="o">=</span>&gt; yank/copy to clipboard
<span class="nv">p</span>           <span class="o">=</span>&gt; paste after the cursor
<span class="nv">P</span>           <span class="o">=</span>&gt; paste before the cursor
/string     <span class="o">=</span>&gt; search <span class="k">for</span> string forward
?string     <span class="o">=</span>&gt; search <span class="k">for</span> string backward
<span class="nv">n</span>           <span class="o">=</span>&gt; next occurrence
<span class="nv">N</span>           <span class="o">=</span>&gt; previous occurrence
 
<span class="c1"># Opening more files in stacked windows</span>
vim -o file1 file2
 
<span class="c1"># Opening more files and highlighting the differences</span>
vim -d file1 file2
Ctrl+w <span class="o">=</span>&gt; move between files
</code></pre></td></tr></table>
</div>
</div><h1 id="tar-command"><code>tar</code> command</h1>
<p><code>tar</code> is the most widely used command to create compressed archive files that can be moved easily from one disk or machine to another. The syntax of <code>tar</code> is</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">tar <span class="o">[</span>option<span class="o">]</span>... &lt;destinate file&gt; &lt;compressed files&gt;...
</code></pre></td></tr></table>
</div>
</div><p><code>tar</code> is a complex tool used to both archive and compress files as well as extract the resulting archives. Before continuing, I want to make a distinction between two terms: archiving and compressing. Archiving means that if you take 10 files of 100 kilobytes and <strong>archive</strong> them, the resulting single file is 1000 kilobytes. On the other hand, if you <strong>compress</strong> those 10 files, you might find that the resulting file has a wide range from only a few kilobytes to close to the original size, depending on the original file type. In general, text files have a higher compression ratio.</p>
<p><code>tar</code> alone <strong>only archives</strong> the files, it does not compress them as well. But using specific options tar can pass the files to the compression algorithm and the final result will be compressed, without using another dedicated command for that.</p>
<h2 id="-c--z--j--v--f"><code>-c</code>, <code>-z</code>, <code>-j</code>, <code>-v</code>, <code>-f</code></h2>
<ul>
<li><code>-c</code>: creates an archive. (By the way, the archive file are called tarballs.)</li>
<li><code>-z</code>: also compress the archive using gzip or gnuzip compression.</li>
</ul>
<p>so if you want to compress a file/dir you need specify <code>-cz</code> at the same time.</p>
<ul>
<li><code>-v</code>: means verbose, prints the process of the command in the terminal.</li>
<li><code>-f</code>: allows you to specify the filename of the archive.</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ mkdir -p d1/d2/d3/d4
ubuntu@ip-172-31-87-26:~$ tar -czvf d1.tar.gz d1
d1/
d1/d2/
d1/d2/d3/
d1/d2/d3/d4/
ubuntu@ip-172-31-87-26:~$ ls
a         b  d   d1.tar.gz  dir2   ls      mac.txt  projects
auth.log  c  d1  dir1       files  ls.txt  passwd
</code></pre></td></tr></table>
</div>
</div><p>You can see <code>tar</code> will compress every other directory inside the specified directory itself. In other words, it works <strong>recursively</strong>.</p>
<p>Note that the <strong>type of the file is not given by its extension</strong>. It&rsquo;s only helpful to visually find out what kind a specific file is. In this case it&rsquo;s an archive that was further compressed with gzip.</p>
<p>In other Linux commands, it doesn&rsquo;t matter the order of the options, but in the case of tar it&rsquo;s mandatory to specify the <strong>archive file name after the option <code>-f</code></strong>. If I write the <code>-f</code> option bat the beginning I‚Äôll get an error like this.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ tar -fczv d1.tar.gz d1
tar: You must specify one of the <span class="s1">&#39;-Acdtrux&#39;</span>, <span class="s1">&#39;--delete&#39;</span> or <span class="s1">&#39;--test-label&#39;</span> options
Try <span class="s1">&#39;tar --help&#39;</span> or <span class="s1">&#39;tar --usage&#39;</span> <span class="k">for</span> more information.
</code></pre></td></tr></table>
</div>
</div><p>And another useful compression algorithm is <code>bzip2</code> which creates smaller files, but at the cost of speed. However, nowadays computers are so fast that most users won&rsquo;t notice much of a difference between the between the times taken by <code>gzip</code> or <code>bzip2</code> to compress a group of files.</p>
<p>To <code>bzip2</code> instead of <code>gzip</code>, simply use the <code>-j</code> option instead of <code>-z</code>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ tar -cjvf d2/d1.tar.bzip2 d1
d1/
d1/d2/
d1/d2/d3/
d1/d2/d3/d4/
ubuntu@ip-172-31-87-26:~$ tree d2
d2
‚îú‚îÄ‚îÄ d1.tar.bzip2
‚îî‚îÄ‚îÄ d1.tar.gz

<span class="m">0</span> directories, <span class="m">2</span> files
</code></pre></td></tr></table>
</div>
</div><p><code>tar</code> is frequently used to compress a single directory, but you could also use it to compress <strong>multiple</strong> directories, multiple individual files or both; just provide a list of files or directories instead of a single one, like this:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ ls
a         b  d   d1.tar.gz  dir1  files  ls.txt   passwd
auth.log  c  d1  d2         dir2  ls     mac.txt  projects
ubuntu@ip-172-31-87-26:~$ tar -czf d2/multi.tar.gz d1 ls.txt mac.txt
ubuntu@ip-172-31-87-26:~$ tree d2
d2
‚îú‚îÄ‚îÄ d1.tar.bzip2
‚îú‚îÄ‚îÄ d1.tar.gz
‚îî‚îÄ‚îÄ multi.tar.gz

<span class="m">0</span> directories, <span class="m">3</span> files
</code></pre></td></tr></table>
</div>
</div><h2 id="--exclude"><code>--exclude</code></h2>
<p>In some cases, it&rsquo;s useful to exclude some files from the archive. Imagine that you make a back up of a directory and want to exclude the music, video or other non important files.</p>
<p>To do that, use <strong>one or more <code>--exclude</code> options</strong> like this:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ tar --exclude<span class="o">=</span><span class="s2">&#34;*.mkv&#34;</span> --exclude<span class="o">=</span><span class="s2">&#34;*.conf&#34;</span> -czf myhome.tar.gz ~
tar: Removing leading <span class="sb">`</span>/<span class="err">&#39;</span> from member names
tar: /home/ubuntu: file changed as we <span class="nb">read</span> it
</code></pre></td></tr></table>
</div>
</div><h2 id="-x"><code>-x</code></h2>
<p>To extract the contents of an archive in the <strong>current working directory</strong> (instead of the dir where the compressed file is), use <code>-x</code> option, which comes from extract, and the same options <code>-zvf</code> and the name of the archive, so just replace <code>-czvf</code> (or <code>-cjvf</code>) with <code>-xzvf</code> (or <code>-xjvf</code>)</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ sudo tar -czf d2/etc.tar.gz /etc
ubuntu@ip-172-31-87-26:~$ ls d2
d1.tar.bzip2  d1.tar.gz  etc.tar.gz  home.tar.gz  multi.tar.gz
ubuntu@ip-172-31-87-26:~$ sudo tar -xzf d2/etc.tar.gz
ubuntu@ip-172-31-87-26:~$ ls d2
d1.tar.bzip2  d1.tar.gz  etc.tar.gz  home.tar.gz  multi.tar.gz
ubuntu@ip-172-31-87-26:~$ ls
a  d          d11.tar.gz  dir2   ls       myhome.tar.gz
b  d1         d2          etc    ls.txt   passwd
c  d1.tar.gz  dir1        files  mac.txt  projects
</code></pre></td></tr></table>
</div>
</div><p>You can see the extracted file <code>etc/</code> is in the <code>~</code>.</p>
<p>If you want to extract an archive into <strong>another directory</strong> use <code>-C</code> option and the destination directory.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ mkdir d3
ubuntu@ip-172-31-87-26:~$ tar -xzf d2/etc.tar.gz -C d3/
ubuntu@ip-172-31-87-26:~$ ls d3
etc
</code></pre></td></tr></table>
</div>
</div><p>Note that these two compression algorithms are <strong>incompatible</strong>; if you want to extract a <code>gzip</code> archive using the <code>-j</code> option, which is the option for archives of type <code>bzip2</code>, you‚Äôll get an error. Specify the correct option, which is <code>-z</code> for <code>gzip</code> and <code>-j</code> for <code>bzip</code>, or allow <code>tar</code> to auto-detect the compression type by specifying no option for the compression algorithm.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ tar -xjf d2/etc.tar.gz -C d3/
bzip2: <span class="o">(</span>stdin<span class="o">)</span> is not a bzip2 file.
tar: Child returned status <span class="m">2</span>
tar: Error is not recoverable: exiting now
ubuntu@ip-172-31-87-26:~$ tar -xf d2/etc.tar.gz -C d3/
</code></pre></td></tr></table>
</div>
</div><p>By the way, There are more and more files with the <code>.xz</code> extension. These are files compressed with the LZMA algorithm and tar will <strong>autodetect</strong> the compression type and extract the archive.</p>
<p>In most cases, we&rsquo;ll tar to compress files using different compression protocols. However, note that there are also dedicated commands that only compress or extract files and directories using <code>gzip</code> and <code>bzip2</code>. <code>gzip</code> is used to compress a file or directory. <code>gunzip</code> is used to extract a gzip archive. Then there&rsquo;s <code>bzip2</code> and <code>bunzip2</code>.</p>
<h2 id="-t"><code>-t</code></h2>
<p>To see the contents of an archive use the <code>-t</code> option, which comes from the table of contents. When you want to check if a specific file is in the archive pipe the output of the previous command to <code>grep</code>. For example,</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ tar -tf d2/etc.tar.gz <span class="p">|</span> grep sshd_config
etc/ssh/sshd_config
etc/ssh/sshd_config.d/
ubuntu@ip-172-31-87-26:~$ tar -tf d2/etc.tar.gz <span class="p">|</span> grep apache2
etc/apparmor.d/abstractions/apache2-common
</code></pre></td></tr></table>
</div>
</div><h2 id="name-file-by-date">name file by <code>date</code></h2>
<p>If you want to have versions, which are backups made in different days, then you need to insert the <code>date</code> into the back up filename, like this</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">abcd-<span class="k">$(</span>date +%F<span class="k">)</span>.tar.bz2 
<span class="c1"># note that there is a white space between date and +</span>
</code></pre></td></tr></table>
</div>
</div><p>For example,</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ sudo tar -czf d2/etc-<span class="k">$(</span>date +%F<span class="k">)</span>.tar.gz /etc
ubuntu@ip-172-31-87-26:~$ ls d2
d1.tar.bzip2  etc-2022-04-27.tar.gz  home.tar.gz
d1.tar.gz     etc.tar.gz             multi.tar.gz
</code></pre></td></tr></table>
</div>
</div><h1 id="link">Link</h1>
<h2 id="hard-link">hard link</h2>
<h3 id="inode">inode</h3>
<p>In this section we‚Äôll discuss inodes and hard links. Each file on the disk has a data structure called index node or <strong>inode</strong> associated with it which is fixed in length.</p>
<p>This structure stores metadata information about the file such as the type, file‚Äôs permission, file‚Äôs owner and group, timestamp information, file size and so on. You can see most of the information stored in a file‚Äôs inode in the output of <code>ls -l</code></p>
<p>The inode structure contains all file information <strong>except the file contents and the name</strong>. <strong>Each inode is uniquely identified by an integer number called inode number</strong>. To see it run <code>ls</code> with <code>-i</code> option. You can combine it with other options as well.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ ls -i
<span class="m">306837</span> a   <span class="m">306643</span> d1.tar.gz   <span class="m">307840</span> dir2    <span class="m">285491</span> mac.txt
<span class="m">285460</span> b   <span class="m">285475</span> d11.tar.gz  <span class="m">306845</span> etc     <span class="m">306839</span> myhome.tar.gz
<span class="m">306637</span> c   <span class="m">306834</span> d2          <span class="m">306633</span> files   <span class="m">285474</span> passwd
<span class="m">306638</span> d   <span class="m">520974</span> d3          <span class="m">306636</span> ls      <span class="m">256333</span> projects
<span class="m">256339</span> d1  <span class="m">256056</span> dir1        <span class="m">256381</span> ls.txt
</code></pre></td></tr></table>
</div>
</div><p>The file name and the file contents are not part of the Inode. <strong>In the inode structure there are only some pointers to the data blocks where the file contents are saved</strong>. But where&rsquo;s the filename if it&rsquo;s not in the file&rsquo;s inode structure? A filename is an entry in a directory. Basically <strong>directories are two column tables</strong> where the first column is the filename and the second column is the Inode number.</p>
<p>This is a simplified approach, I&rsquo;m creating a new file using the <code>touch</code> command. When I referred to a file like, <code>cat qq.txt</code> it will search in the current directory for the corresponding Inode number of <code>a.txt</code>, that is 307689.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ touch qq.txt
ubuntu@ip-172-31-87-26:~$ ls -li qq.txt 
<span class="m">307689</span> -rw-rw-r-- <span class="m">1</span> ubuntu ubuntu <span class="m">0</span> Apr <span class="m">27</span> 04:36 qq.txt
</code></pre></td></tr></table>
</div>
</div><p>Having that number, the kernel can identify the file and all of the information about it. So as a conclusion, the file name doesn&rsquo;t belong to the file structure. It‚Äôs just a string, and the <strong>pointing</strong> between the file structure and the filename happens through the data structure of the directory that contains the filename. An association between a file structure and a file name is called <strong>hard link</strong>.</p>
<p>In fact, this is a hardlink. In the current directory <code>qq.txt</code> was associated with the number 307689. By the way, that&rsquo;s why the 3rd column of the output of <code>ls -li qq.txt</code> is 1. It means 1 hardlink. To see the number of hardlinks run <code>ls -l</code> or <code>stat</code>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ stat qq.txt 
  File: qq.txt
  Size: <span class="m">0</span>         	Blocks: <span class="m">0</span>          IO Block: <span class="m">4096</span>   regular empty file
Device: ca01h/51713d	Inode: <span class="m">307689</span>      Links: <span class="m">1</span>  <span class="c1"># &lt;-- The number of hard link</span>
Access: <span class="o">(</span>0664/-rw-rw-r--<span class="o">)</span>  Uid: <span class="o">(</span> 1000/  ubuntu<span class="o">)</span>   Gid: <span class="o">(</span> 1000/  ubuntu<span class="o">)</span>
Access: 2021-04-27 04:36:48.010032608 +0000
Modify: 2021-04-27 04:36:48.010032608 +0000
Change: 2021-04-27 04:36:48.010032608 +0000
 Birth: -
</code></pre></td></tr></table>
</div>
</div><h3 id="create-hard-link">create hard link</h3>
<p>One useful application of the hard links is to allow files, programs and scripts to be easily accessed in a different directory without making copies of the same file. You can create a new hardlink by running the <code>ln</code> command, which comes from link.</p>
<p>At this moment, the file called qq.txt has only one hard link, because there is one name that points to the inode structure. To create a new link to the same file structure run</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ln &lt;existing name&gt; &lt;new name&gt;
</code></pre></td></tr></table>
</div>
</div><p>which creates a new file name for the same file structure. We can see that both files have the same inode number and the number of hardlinks is now 2.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ ln qq.txt qq1.txt
ubuntu@ip-172-31-87-26:~$ ls -li qq.txt qq1.txt 
<span class="m">307689</span> -rw-rw-r-- <span class="m">2</span> ubuntu ubuntu <span class="m">0</span> Apr <span class="m">27</span> 04:36 qq.txt
<span class="m">307689</span> -rw-rw-r-- <span class="m">2</span> ubuntu ubuntu <span class="m">0</span> Apr <span class="m">27</span> 04:36 qq1.txt
</code></pre></td></tr></table>
</div>
</div><p>Note that <code>qq1.txt</code> is not a copy of <code>qq.txt</code>. The information on the disk is saved only once and both files point to the same data. If I change one of them, the other will be changed as well.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ ifconfig &gt; qq.txt
ubuntu@ip-172-31-87-26:~$ cat qq1.txt 
eth0: <span class="nv">flags</span><span class="o">=</span>4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu <span class="m">9001</span>
        inet 172.31.87.26  netmask 255.255.240.0  broadcast 172.31.95.255
        inet6 fe80::10b8:5eff:fe3f:aa45  prefixlen <span class="m">64</span>  scopeid 0x20&lt;link&gt;
        ether 12:b8:5e:3f:aa:45  txqueuelen <span class="m">1000</span>  <span class="o">(</span>Ethernet<span class="o">)</span>
        RX packets <span class="m">672426</span>  bytes <span class="m">521515910</span> <span class="o">(</span>521.5 MB<span class="o">)</span>
        RX errors <span class="m">0</span>  dropped <span class="m">0</span>  overruns <span class="m">0</span>  frame <span class="m">0</span>
        TX packets <span class="m">457130</span>  bytes <span class="m">114725986</span> <span class="o">(</span>114.7 MB<span class="o">)</span>
        TX errors <span class="m">0</span>  dropped <span class="m">0</span> overruns <span class="m">0</span>  carrier <span class="m">0</span>  collisions <span class="m">0</span>

lo: <span class="nv">flags</span><span class="o">=</span>73&lt;UP,LOOPBACK,RUNNING&gt;  mtu <span class="m">65536</span>
        inet 127.0.0.1  netmask 255.0.0.0
        inet6 ::1  prefixlen <span class="m">128</span>  scopeid 0x10&lt;host&gt;
        loop  txqueuelen <span class="m">1000</span>  <span class="o">(</span>Local Loopback<span class="o">)</span>
        RX packets <span class="m">1542</span>  bytes <span class="m">150034</span> <span class="o">(</span>150.0 KB<span class="o">)</span>
        RX errors <span class="m">0</span>  dropped <span class="m">0</span>  overruns <span class="m">0</span>  frame <span class="m">0</span>
        TX packets <span class="m">1542</span>  bytes <span class="m">150034</span> <span class="o">(</span>150.0 KB<span class="o">)</span>
        TX errors <span class="m">0</span>  dropped <span class="m">0</span> overruns <span class="m">0</span>  carrier <span class="m">0</span>  collisions <span class="m">0</span>
</code></pre></td></tr></table>
</div>
</div><p>Note that you cannot create a hard link to a directory or a hard link to a file on a different partition or disk. A hardlink cannot cross the filesystem boundaries.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ ln d1 d111
ln: d1: hard link not allowed <span class="k">for</span> directory
</code></pre></td></tr></table>
</div>
</div><p>However, if you run the <code>ls -l</code> command on a directory, you notice the number of links is not 1.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ ls -ldi /etc
<span class="m">43</span> drwxr-xr-x <span class="m">94</span> root root <span class="m">4096</span> Apr <span class="m">25</span> 04:32 /etc
</code></pre></td></tr></table>
</div>
</div><p>The <code>/etc</code> directory has 94 hardlinks. That because there are 94 names to the same structure, the <code>/etc</code> directory. One is <code>etc</code>, another one is the <code>.</code>, which belongs to each directory and its reference to itself. You can see that <code>etc</code> and <code>/etc/.</code> has the same inode number 43.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ ls -lai /etc <span class="p">|</span> head -n <span class="m">5</span> 
total <span class="m">820</span>
   <span class="m">43</span> drwxr-xr-x <span class="m">94</span> root root       <span class="m">4096</span> Apr <span class="m">25</span> 04:32 .
    <span class="m">2</span> drwxr-xr-x <span class="m">19</span> root root       <span class="m">4096</span> Apr <span class="m">14</span> 07:31 ..
  <span class="m">119</span> -rw-------  <span class="m">1</span> root root          <span class="m">0</span> Nov <span class="m">29</span> 23:30 .pwd.lock
  <span class="m">739</span> drwxr-xr-x  <span class="m">3</span> root root       <span class="m">4096</span> Nov <span class="m">29</span> 23:32 NetworkManager
</code></pre></td></tr></table>
</div>
</div><p>And then there are 92 subdirectories, and each of them contains the <code>..</code>, which is a reference to its parent. You can see that the inode number of <code>/etc/NetworkManager/..</code> is 43.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ ls -lai /etc/NetworkManager <span class="p">|</span> head -n <span class="m">5</span>
total <span class="m">12</span>
<span class="m">739</span> drwxr-xr-x  <span class="m">3</span> root root <span class="m">4096</span> Nov <span class="m">29</span> 23:32 .
 <span class="m">43</span> drwxr-xr-x <span class="m">94</span> root root <span class="m">4096</span> Apr <span class="m">25</span> 04:32 ..
<span class="m">740</span> drwxr-xr-x  <span class="m">2</span> root root <span class="m">4096</span> Nov <span class="m">29</span> 23:32 dispatcher.d
</code></pre></td></tr></table>
</div>
</div><p>and there are 92 subdirectories in <code>/etc</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ ls -l /etc <span class="p">|</span> grep -c <span class="s2">&#34;^d&#34;</span>
<span class="m">92</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="delete-hard-link">delete hard link</h3>
<p>If you delete a file using <code>rm</code> then only the entry from the directory that contains the file is removed and the link count of the inode is decremented. Only when it reaches zero, the disk space associated with the inode and the inode itself is freed for further reuse.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ rm qq1.txt 
ubuntu@ip-172-31-87-26:~$ ls -li qq.txt 
<span class="m">307689</span> -rw-rw-r-- <span class="m">1</span> ubuntu ubuntu <span class="m">902</span> Apr <span class="m">27</span> 04:45 qq.txt
</code></pre></td></tr></table>
</div>
</div><h3 id="find-hard-link"><code>find</code> hard link</h3>
<p>Consider that you know that there are 2 hard links for the file to which <code>qq.txt</code> points and want to find out the other one.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ ln qq.txt d1/qq2.txt
ubuntu@ip-172-31-87-26:~$ ls -li qq.txt 
<span class="m">307689</span> -rw-rw-r-- <span class="m">2</span> ubuntu ubuntu <span class="m">902</span> Apr <span class="m">27</span> 04:45 qq.txt
</code></pre></td></tr></table>
</div>
</div><p>To do this, use the <code>find</code> command with the <code>-inum</code> option and the inode number, like</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ sudo find . -inum <span class="m">307689</span>
./qq.txt
./d1/qq2.txt
</code></pre></td></tr></table>
</div>
</div><p>it found all the links. And if you want to find files by the number of hardlinks, use the <code>find</code> command with <code>-links</code> option. Let&rsquo;s find all the files in <code>/usr</code> with more than one link:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ find /usr -type f -links +1 <span class="p">|</span> wc -l
<span class="m">217</span>
</code></pre></td></tr></table>
</div>
</div><p>All these files have more than one link.</p>
<h2 id="soft-link">soft link</h2>
<p>Soft links is also called symbolic links or symlinks. They are similar to shortcuts in Windows and behave differently compared to hard links.</p>
<p>If a hard link is an association between an inode structure and a filename in a directory, a symlink is just a special filetype that points to or contains a reference to another file or directory. So <strong>a hard link references the file‚Äôs inode and a symlink references another file</strong>.</p>
<p><img src="https://raw.githubusercontent.com/floating15/img/main/202204271340807.png"
	
	
	
	loading="lazy"
	
	
></p>
<p>If you delete a hard link, the remaining files point to the same space or inode in the file system and they will still contain the data stored on the disk. But if you delete the file, the symlink points to the symlink will be useless or broken.</p>
<p>To create a symlink we use the same command as for creating hard links, which is <code>ln</code>, but with the <code>-s</code> option.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ touch ppp.txt
ubuntu@ip-172-31-87-26:~$ ln -s ppp.txt ppps.txt
ubuntu@ip-172-31-87-26:~$ ln ppp.txt ppph.txt
ubuntu@ip-172-31-87-26:~$ ls -li ppp*
<span class="m">307690</span> -rw-rw-r-- <span class="m">2</span> ubuntu ubuntu <span class="m">0</span> Apr <span class="m">27</span> 05:42 ppp.txt
<span class="m">307690</span> -rw-rw-r-- <span class="m">2</span> ubuntu ubuntu <span class="m">0</span> Apr <span class="m">27</span> 05:42 ppph.txt
<span class="m">307691</span> lrwxrwxrwx <span class="m">1</span> ubuntu ubuntu <span class="m">7</span> Apr <span class="m">27</span> 05:42 ppps.txt -&gt; ppp.txt
</code></pre></td></tr></table>
</div>
</div><p>See <code>ls -l</code> is indicating that <code>ppps.txt</code> is a symlink and it‚Äôs also displaying the file it points to. The symlink has its own inode structure. However, all hard links have the same inode structure and inode number. I can access the contents of <code>ppp.txt</code> using the symlink.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ <span class="nb">echo</span> <span class="s2">&#34;test&#34;</span> &gt; ppph.txt 
ubuntu@ip-172-31-87-26:~$ cat ppps.txt 
<span class="nb">test</span>
</code></pre></td></tr></table>
</div>
</div><p>A symlink contains only <strong>the path to the original file or directory</strong>, not its contents. Thus if I move <code>ppp.txt</code> to another directory, <code>ppph.txt</code>, the hardlink will not be affected, but the symlink will be broken.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ubuntu@ip-172-31-87-26:~$ mkdir dd
ubuntu@ip-172-31-87-26:~$ mv ppp.txt dd/
ubuntu@ip-172-31-87-26:~$ cat ppph.txt 
<span class="nb">test</span>
ubuntu@ip-172-31-87-26:~$ cat ppps.txt 
cat: ppps.txt: No such file or directory
</code></pre></td></tr></table>
</div>
</div><p>Symlinks are used more than hardinks and we can say that many services like the Web server Appache2 use symlinks extensively in their configuration. Other properties of symlinks are:</p>
<ul>
<li>you can create a symlink to a directory.</li>
<li>A symlink can cross the filesystem.</li>
<li>The permissions of symlinks don‚Äôt matter because the permissions of the target file will be checked.</li>
</ul>

</section>


    <footer class="article-footer">
    

    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
        <link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css"integrity="sha384-RZU/ijkSsFbcmivfdRBQDtwuwVqK7GMOw6IMvKyeWL2K5UAlyp6WonmB8m7Jd0Hn"crossorigin="anonymous"
            ><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.js"integrity="sha384-pK1WpvzWVBQiP0/GjnvRxV4mOb0oxFuyRxJlk6vVw146n3egcN5C925NCP7a7BY8"crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/contrib/auto-render.min.js"integrity="sha384-vZTG03m&#43;2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl"crossorigin="anonymous"
                defer
                >
            </script><script>
    window.addEventListener("DOMContentLoaded", () => {
        renderMathInElement(document.querySelector(`.article-content`), {
            delimiters: [
                { left: "$$", right: "$$", display: true },
                { left: "$", right: "$", display: false },
                { left: "\\(", right: "\\)", display: false },
                { left: "\\[", right: "\\]", display: true }
            ]
        });})
</script>
    
</article>

    

    

<aside class="related-contents--wrapper">
    <h2 class="section-title">Related contents</h2>
    <div class="related-contents">
        <div class="flex article-list--tile">
            
                
<article class="">
    <a href="/p/linux-operation-system-iv-user-account-management/">
        
        

        <div class="article-details">
            <h2 class="article-title">Linux Operation System IV (User Account Management)</h2>
        </div>
    </a>
</article>
            
                
<article class="">
    <a href="/p/linux-operation-system-ii-file-system-1/">
        
        

        <div class="article-details">
            <h2 class="article-title">Linux Operation System II (File System 1)</h2>
        </div>
    </a>
</article>
            
                
<article class="">
    <a href="/p/linux-operation-system-i-terminal/">
        
        

        <div class="article-details">
            <h2 class="article-title">Linux Operation System I (Terminal)</h2>
        </div>
    </a>
</article>
            
        </div>
    </div>
</aside>

     
    
        
    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2020 - 
        
        2022 Haoming Wang
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        Theme <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.11.0">Stack</a></b> designed by <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a>
    </section>

</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css"integrity="sha256-c0uckgykQ9v5k&#43;IqViZOZKc47Jn7KQil4/MP3ySA3F8="crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css"integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE="crossorigin="anonymous"
            >

            </main>
    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">Table of contents</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#pipe-and-redirection">Pipe and Redirection</a>
      <ol>
        <li><a href="#-pipe"><code>|</code> pipe</a></li>
        <li><a href="#redirection">Redirection</a>
          <ol>
            <li><a href="#heading"><code>&gt;</code></a></li>
            <li><a href="#heading-1"><code>&gt;&gt;</code></a></li>
            <li><a href="#2-2"><code>2&gt;</code>, <code>2&gt;&gt;</code></a></li>
            <li><a href="#21"><code>2&gt;&amp;1</code></a></li>
            <li><a href="#redirection-and-pipe">redirection and pipe</a></li>
            <li><a href="#tee-command"><code>tee</code> command</a></li>
          </ol>
        </li>
        <li><a href="#compendium">Compendium</a></li>
      </ol>
    </li>
    <li><a href="#find">Find</a>
      <ol>
        <li><a href="#locate-command"><code>locate</code> command</a>
          <ol>
            <li><a href="#-b"><code>-b</code></a></li>
            <li><a href="#updatedb-command"><code>updatedb</code> command</a></li>
            <li><a href="#-e"><code>-e</code></a></li>
            <li><a href="#-i"><code>-i</code></a></li>
            <li><a href="#-r"><code>-r</code></a></li>
            <li><a href="#which-command"><code>which</code> command</a></li>
          </ol>
        </li>
        <li><a href="#find-command"><code>find</code> command</a>
          <ol>
            <li><a href="#-name--iname"><code>-name</code>, <code>-iname</code></a></li>
            <li><a href="#-delete"><code>-delete</code></a></li>
            <li><a href="#-ls"><code>-ls</code></a></li>
            <li><a href="#-type--maxdepth"><code>-type</code>, <code>-maxdepth</code></a></li>
            <li><a href="#-perm"><code>-perm</code></a></li>
            <li><a href="#-size"><code>-size</code></a></li>
            <li><a href="#-atime--mtime--ctime"><code>-atime</code>, <code>-mtime</code>, <code>-ctime</code></a></li>
            <li><a href="#-amin--mmin--cmin"><code>-amin</code>, <code>-mmin</code>, <code>-cmin</code></a></li>
            <li><a href="#-user--group"><code>-user</code>, <code>-group</code></a></li>
            <li><a href="#-not"><code>-not</code></a></li>
            <li><a href="#-exec--ok"><code>-exec</code>, <code>-ok</code></a></li>
          </ol>
        </li>
        <li><a href="#grep-command"><code>grep</code> command</a>
          <ol>
            <li><a href="#-i-1"><code>-i</code></a></li>
            <li><a href="#-n"><code>-n</code></a></li>
            <li><a href="#-w"><code>-w</code></a></li>
            <li><a href="#-v"><code>-v</code></a></li>
            <li><a href="#-a"><code>-a</code></a></li>
            <li><a href="#-r-1"><code>-R</code></a></li>
            <li><a href="#-s--c"><code>-s</code>, <code>-c</code></a></li>
            <li><a href="#-a--b--c"><code>-A</code>, <code>-B</code>, <code>-C</code></a></li>
          </ol>
        </li>
        <li><a href="#strings-command"><code>strings</code> command</a></li>
        <li><a href="#compendium-1">Compendium</a></li>
      </ol>
    </li>
    <li><a href="#compare">Compare</a>
      <ol>
        <li><a href="#cmp-command"><code>cmp</code> command</a></li>
        <li><a href="#sha256sum-command"><code>sha256sum</code> command</a></li>
        <li><a href="#diff-command"><code>diff</code> command</a></li>
      </ol>
    </li>
    <li><a href="#vim">Vim</a>
      <ol>
        <li><a href="#intro">Intro</a>
          <ol>
            <li><a href="#command-mode">Command mode</a></li>
            <li><a href="#insert-mode">Insert mode</a></li>
            <li><a href="#last-line-mode">Last line mode</a></li>
          </ol>
        </li>
        <li><a href="#more-on-vim">More on vim</a>
          <ol>
            <li><a href="#run-shell-command">run shell command</a></li>
            <li><a href="#search">search</a></li>
            <li><a href="#jump-to-word">jump to word</a></li>
            <li><a href="#jump-to-line">jump to line</a></li>
            <li><a href="#replace">replace</a></li>
            <li><a href="#undo">undo</a></li>
            <li><a href="#cut-copy-and-paste">cut, copy and paste</a></li>
            <li><a href="#config">config</a></li>
            <li><a href="#multi-files">multi files</a></li>
            <li><a href="#swap-file">swap file</a></li>
          </ol>
        </li>
        <li><a href="#compendium-2">Compendium</a></li>
      </ol>
    </li>
    <li><a href="#tar-command"><code>tar</code> command</a>
      <ol>
        <li><a href="#-c--z--j--v--f"><code>-c</code>, <code>-z</code>, <code>-j</code>, <code>-v</code>, <code>-f</code></a></li>
        <li><a href="#--exclude"><code>--exclude</code></a></li>
        <li><a href="#-x"><code>-x</code></a></li>
        <li><a href="#-t"><code>-t</code></a></li>
        <li><a href="#name-file-by-date">name file by <code>date</code></a></li>
      </ol>
    </li>
    <li><a href="#link">Link</a>
      <ol>
        <li><a href="#hard-link">hard link</a>
          <ol>
            <li><a href="#inode">inode</a></li>
            <li><a href="#create-hard-link">create hard link</a></li>
            <li><a href="#delete-hard-link">delete hard link</a></li>
            <li><a href="#find-hard-link"><code>find</code> hard link</a></li>
          </ol>
        </li>
        <li><a href="#soft-link">soft link</a></li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js"integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

<script
    src="https://cdn.jsdelivr.net/gh/zhixuan2333/gh-blog@v0.1.0/js/ribbon.min.js"
    integrity="sha384-UEK8ZiP3VgFNP8KnKMKDmd4pAUAOJ59Y2Jo3ED2Z5qKQf6HLHovMxq7Beb9CLPUe"
    crossorigin="anonymous"
    size="300"
    alpha="0.6"
    zindex="-1"
    defer
></script>


    </body>
</html>
