<!DOCTYPE html>
<html lang="en-us" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='All figures in this blog are embedded by Github Image Hosting Service. These figures may not be displayed on mobile devices.
 Manipulating files and directories Interface An operating system like Windows, Linux, or Mac OS is a special kind of program. It controls the computer&amp;rsquo;s processor, hard drive, and network connection, but its most important job is to run other programs.
Human beings need an interface to interact with the operating system.'><title>Linux Command Line &amp; Shell Script I</title>

<link rel='canonical' href='https://wanghaoming177.netlify.app/p/linux-command-line-shell-script-i/'>

<link rel="stylesheet" href="/scss/style.min.6cb794b99473add9625fc6fcb4fd8782c21b06365b632b8fbb1076efe11c688e.css"><meta property='og:title' content='Linux Command Line &amp; Shell Script I'>
<meta property='og:description' content='All figures in this blog are embedded by Github Image Hosting Service. These figures may not be displayed on mobile devices.
 Manipulating files and directories Interface An operating system like Windows, Linux, or Mac OS is a special kind of program. It controls the computer&amp;rsquo;s processor, hard drive, and network connection, but its most important job is to run other programs.
Human beings need an interface to interact with the operating system.'>
<meta property='og:url' content='https://wanghaoming177.netlify.app/p/linux-command-line-shell-script-i/'>
<meta property='og:site_name' content='Haoming Wang'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='Shell' /><meta property='article:published_time' content='2022-04-13T00:00:00&#43;00:00'/><meta property='article:modified_time' content='2022-04-13T00:00:00&#43;00:00'/><meta property='og:image' content='https://wanghaoming177.netlify.app/head_img/shell_hi/ss2.png' />
<meta name="twitter:title" content="Linux Command Line &amp; Shell Script I">
<meta name="twitter:description" content="All figures in this blog are embedded by Github Image Hosting Service. These figures may not be displayed on mobile devices.
 Manipulating files and directories Interface An operating system like Windows, Linux, or Mac OS is a special kind of program. It controls the computer&amp;rsquo;s processor, hard drive, and network connection, but its most important job is to run other programs.
Human beings need an interface to interact with the operating system."><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='https://wanghaoming177.netlify.app/head_img/shell_hi/ss2.png' />
    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "dark");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="Toggle Menu">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/IMG_0770_hu86b91b9497cdda82d5c488540c7342b2_101927_300x0_resize_q75_box.jpg" width="300"
                            height="273" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">üåè</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">Haoming Wang</a></h1>
            <h2 class="site-description">We choose to go to the moon in this decade and do the other things, not because they are easy, but because they are hard.</h2>
        </div>
    </header><ol class="social-menu">
            
                <li>
                    <a 
                        href='https://github.com/floating15'
                        target="_blank"
                        title="GitHub"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://twitter.com'
                        target="_blank"
                        title="Linkedin"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-linkedin" width="28" height="28" viewBox="0 0 24 24" stroke-width="1.5" stroke="#9e9e9e" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <rect x="4" y="4" width="16" height="16" rx="2" />
  <line x1="8" y1="11" x2="8" y2="16" />
  <line x1="8" y1="8" x2="8" y2="8.01" />
  <line x1="12" y1="16" x2="12" y2="11" />
  <path d="M16 16v-3a2 2 0 0 0 -4 0" />
</svg>
                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://follow.it/haoming-wang?action=followPub'
                        target="_blank"
                        title="r-mail"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-mailbox" width="28" height="28" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M10 21v-6.5a3.5 3.5 0 0 0 -7 0v6.5h18v-6a4 4 0 0 0 -4 -4h-10.5" />
  <path d="M12 11v-8h4l2 2l-2 2h-4" />
  <path d="M6 15h1" />
</svg>
                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://twitter.com'
                        target="_blank"
                        title="Twitter"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c-.002 -.249 1.51 -2.772 1.818 -4.013z" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        

        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="#FF1C02" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>Home</span>
            </a>
        </li>
        
        

        <li >
            <a href='/about/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="#35FF02" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>About</span>
            </a>
        </li>
        
        

        <li >
            <a href='/notes/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-math-function" width="28" height="28" viewBox="0 0 24 24" stroke-width="1.5" stroke="#02EAFF" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M14 10h1c1 0 1 1 2.016 3.527c.984 2.473 .984 3.473 1.984 3.473h1" />
  <path d="M13 17c1.5 0 3 -2 4 -3.5s2.5 -3.5 4 -3.5" />
  <path d="M3 19c0 1.5 .5 2 2 2s2 -4 3 -9s1.5 -9 3 -9s2 .5 2 2" />
  <line x1="5" y1="12" x2="11" y2="12" />
</svg>
                
                <span>Notes</span>
            </a>
        </li>
        
        

        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="#0223FF" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>Archives</span>
            </a>
        </li>
        
        

        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="#F402FF" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>Search</span>
            </a>
        </li>
        
        

        <li >
            <a href='/links/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>Links</span>
            </a>
        </li>
        

        <div class="menu-bottom-section">
            
            
                <li id="dark-mode-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <span>Dark Mode</span>
                </li>
            
        </div>
    </ol>
</aside>
<main class="main full-width">
    <article class="has-image main-article">
    <header class="article-header">
        <div class="article-image">
            <a href="/p/linux-command-line-shell-script-i/">
                
                    <img src="/head_img/shell_hi/ss2.png" loading="lazy" alt="Featured image of post Linux Command Line &amp; Shell Script I" />
                
            </a>
        </div>
    

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/linux/" >
                Linux
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/linux-command-line-shell-script-i/">Linux Command Line &amp; Shell Script I</a>
        </h2>
    
        
    </div>

    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Apr 13, 2022</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    31 minute read
                </time>
            </div>
        
    </footer>
    

    
</div>
</header>

    <section class="article-content">
    
    
    <blockquote>
<p>All figures in this blog are embedded by Github Image Hosting Service. These figures may not be displayed on mobile devices.</p>
</blockquote>
<h1 id="manipulating-files-and-directories">Manipulating files and directories</h1>
<h2 id="interface">Interface</h2>
<p>An operating system like Windows, Linux, or Mac OS is a special kind of program. It controls the computer&rsquo;s processor, hard drive, and network connection, but its most important job is to run other programs.</p>
<p>Human beings need an interface to interact with the operating system. The most common one these days is a <strong>graphical file explorer</strong>, which translates clicks and double-clicks into commands to open files and run programs. Before computers had graphical displays, though, people typed instructions into a program called a <strong>command-line shell</strong>. Each time a command is entered, the shell runs some other programs, prints their output in human-readable form, and then displays a prompt to signal that it&rsquo;s ready to accept the next command. (Its name comes from the notion that it&rsquo;s the &ldquo;outer shell&rdquo; of the computer.)</p>
<h2 id="pwd"><code>pwd</code></h2>
<p>The filesystem manages files and directories (or folders). Each is identified by an <strong>absolute path</strong> that shows how to reach it from the filesystem&rsquo;s <strong>root directory</strong>: <code>/home/repl</code> is the directory <code>repl</code> in the directory <code>home</code>, while <code>/home/repl/course.txt</code> is a file <code>course.txt</code> in that directory, and <code>/</code> on its own is the root directory.</p>
<p>To find out where you are in the filesystem, run the command <code>pwd</code> (short for &ldquo;<strong>print working directory</strong>&quot;). This prints the <strong>absolute path</strong> of your current working directory, which is where the shell runs commands and looks for files by default.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">$ <span class="nb">pwd</span>
/home/repl
</code></pre></td></tr></table>
</div>
</div><h2 id="ls"><code>ls</code></h2>
<p><code>pwd</code> tells you where you are. To find out what&rsquo;s there, type <code>ls</code> (which is short for &ldquo;<strong>listing</strong>&quot;) and press the enter key. On its own, <code>ls</code> lists the contents of your current directory. If you add the names of some files, <code>ls</code> will list them, and if you add the names of directories, it will list their contents. For example, <code>ls /home/repl</code> shows you what&rsquo;s in your starting directory (usually called your home directory).</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">$ ls /home/repl/seasonal/
autumn.csv  spring.csv  summer.csv  winter.csv
$
$ ls /home/repl/seasonal/autumn.csv
/home/repl/seasonal/autumn.csv
</code></pre></td></tr></table>
</div>
</div><p>An <strong>absolute path</strong> is like a latitude and longitude: it has the same value no matter where you are. A <strong>relative path</strong>, on the other hand, specifies a location starting from where you are. The shell decides if a path is absolute or relative by looking at its first character: If it begins with <code>/</code>, it is absolute. If it does not begin with <code>/</code>, it is relative.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-Bash" data-lang="Bash">$ ls
backup  bin  course.txt  people  seasonal
$ ls course.txt
course.txt
$ ls seasonal/summer.csv
seasonal/summer.csv
$ ls people/
agarwal.txt
</code></pre></td></tr></table>
</div>
</div><h2 id="cd"><code>cd</code></h2>
<p>You can move around in the filesystem using the command <code>cd</code> (which stands for &ldquo;<strong>change directory</strong>&quot;). If you type <code>cd seasonal</code> and then type <code>pwd</code>, the shell will tell you that you are now in <code>/home/repl/seasonal</code>. If you want to get back to your home directory <code>/home/repl</code>, you can use the command <code>cd /home/repl</code>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ <span class="nb">cd</span> /home/repl/seasonal/
$ <span class="nb">pwd</span>
/home/repl/seasonal
$ ls
autumn.csv  spring.csv  summer.csv  winter.csv
</code></pre></td></tr></table>
</div>
</div><h2 id="special-path">special path</h2>
<p>The parent of a directory is the directory above it. For example, <code>/home</code> is the parent of <code>/home/repl</code>, and <code>/home/repl</code> is the parent of <code>/home/repl/seasonal</code>. You can always give the absolute path of your parent directory to commands like <code>cd</code> and <code>ls</code>. More often, though, you will take advantage of the fact that the special path <code>..</code> means &ldquo;<strong>the directory above the currently one</strong>&rdquo;. If you are in <code>/home/repl/seasonal</code>, then <code>cd ..</code> moves you up to <code>/home/repl</code>. If you use <code>cd ../..</code>, it puts you in the root directory <code>/</code>, which is the very top of the filesystem.</p>
<p>A single dot on its own, <code>.</code>, always means &ldquo;<strong>the current directory</strong>&rdquo;, so <code>ls .</code> do the same thing with <code>ls</code>.</p>
<p>One final special path is <code>~</code> (the tilde character), which means &ldquo;<strong>your home directory</strong>&rdquo;, such as <code>/home/repl</code>. No matter where you are, ls <code>~</code> will always list the contents of your home directory, and <code>cd ~</code> will always take you home.</p>
<h2 id="cp"><code>cp</code></h2>
<p>You will often want to copy files, move them into other directories to organize them, or rename them. One command to do this is <code>cp</code>, which is short for &ldquo;<strong>copy</strong>&rdquo;. If <code>original.txt</code> is an existing file, then:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">cp original.txt duplicate.txt
</code></pre></td></tr></table>
</div>
</div><p>creates a copy of <code>original.txt</code> called <code>duplicate.txt</code>. If there already was a file called <code>duplicate.txt</code>, it is <strong>overwritten</strong>. If the last parameter to <code>cp</code> is an existing directory <code>backup</code>, then a command like:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">cp seasonal/autumn.csv seasonal/winter.csv backup
</code></pre></td></tr></table>
</div>
</div><p>copies all of the files into that directory.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ cp seasonal/summer.csv  backup/summer.bck
$ ls backup/
summer.bck
$
$ cp seasonal/spring.csv  seasonal/summer.csv backup/
$ ls backup/
spring.csv  summer.bck  summer.csv
</code></pre></td></tr></table>
</div>
</div><h2 id="mv"><code>mv</code></h2>
<p>While <code>cp</code> copies a file, <code>mv</code> moves it from one directory to another, i.e. cut. It handles its parameters the same way as <code>cp</code>, so the command:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">mv autumn.csv winter.csv ..
</code></pre></td></tr></table>
</div>
</div><p>moves the files <code>autumn.csv</code> and <code>winter.csv</code> from the current working directory up one level to its <strong>parent directory</strong>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ mv ./seasonal/spring.csv  ./seasonal/summer.csv  ./backup/
$
$ ls ./seasonal/
autumn.csv  winter.csv
$ ls ./backup/
spring.csv  summer.csv
</code></pre></td></tr></table>
</div>
</div><p><code>mv</code> can also be used to <strong>rename</strong> files. If you run:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">mv course.txt old-course.txt
</code></pre></td></tr></table>
</div>
</div><p>then the file <code>course.txt</code> in the current working directory is &ldquo;moved&rdquo; to the file <code>old-course.txt</code>. This is different from the way file browsers work, but is often handy.</p>
<p>One warning: just like <code>cp</code>, <code>mv</code> will <strong>overwrite</strong> existing files. If, for example, you already have a file called <code>old-course.txt</code>, then the command shown above will replace it with whatever is in <code>course.txt</code>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ <span class="nb">cd</span> ./seasonal/
$ ls
autumn.csv  spring.csv  summer.csv  winter.csv
$ mv winter.csv winter.csv.bck
$ ls
autumn.csv  spring.csv  summer.csv  winter.csv.bck
</code></pre></td></tr></table>
</div>
</div><h2 id="rm"><code>rm</code></h2>
<p>We can copy files and move them around; to delete them, we use <code>rm</code>, which stands for &ldquo;<strong>remove</strong>&rdquo;. As with <code>cp</code> and <code>mv</code>, you can give <code>rm</code> the names of as many files as you&rsquo;d like, so:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">rm thesis.txt backup/thesis-2017-08.txt
</code></pre></td></tr></table>
</div>
</div><p>removes both <code>thesis.txt</code> and <code>backup/thesis-2017-08.txt</code>. Unlike graphical file browsers, the shell doesn&rsquo;t have a trash can, so when you type the command above, your thesis is gone for good.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ <span class="nb">cd</span> ./seasonal/
$ ls
autumn.csv  spring.csv  summer.csv  winter.csv
$ rm autumn.csv
$ ls
spring.csv  summer.csv  winter.csv
$ <span class="nb">cd</span> ..
$ rm seasonal/summer.csv
$ ls ./seasonal/
spring.csv  winter.csv
</code></pre></td></tr></table>
</div>
</div><p><code>mv</code> treats directories the same way it treats files: if you are in your home directory and run <code>mv seasonal by-season</code>, for example, <code>mv</code> changes the name of the <code>seasonal</code> directory to <code>by-season</code>. However, <code>rm</code> works differently.</p>
<p>If you try to <code>rm</code> a directory, the shell prints an error message telling you it can&rsquo;t do that, primarily to stop you from accidentally deleting an entire directory full of work. Instead, you can use a separate command called <code>rmdir</code>. For added safety, it only works when the directory is <strong>empty</strong>, so you must delete the files in a directory before you delete the directory. Correspondingly, you can use the command <code>mkdir directory_name</code> to create a new (empty) directory.</p>
<p>Experienced users can use the <code>-r</code> <strong>option</strong> to <code>rm</code> to get the same effect; we will discuss command options in the next chapter.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ rm ./people/agarwal.txt
$ rmdir ./people/
$
$ mkdir yearly
$ mkdir yearly/2017
</code></pre></td></tr></table>
</div>
</div><p>You will often create intermediate files when analyzing data. Rather than storing them in your home directory, you can put them in <code>/tmp</code>, which is where people and programs often keep files they only need briefly. (Note that <code>/tmp</code> is immediately below the root directory <code>/</code>.)</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ <span class="nb">cd</span> /tmp
$ ls
tmp4k14q4ue  tmp81oflvp9  tmpkihr78do  tmpkoqewt2k
$ mkdir scratch
$ ls
scratch  tmp4k14q4ue  tmp81oflvp9  tmpkihr78do  tmpkoqewt2k
$ mv ~/people/agarwal.txt  /tmp/scratch/
$ ls scratch/
agarwal.txt
</code></pre></td></tr></table>
</div>
</div><h1 id="manipulating-data">Manipulating Data</h1>
<h2 id="cat-less"><code>cat</code>, <code>less</code></h2>
<p>Before you rename or delete files, you may want to have a look at their contents. The simplest way to do this is with <code>cat</code>, which just prints the contents of files onto the screen. (Its name is short for &ldquo;<strong>concatenate</strong>&rdquo;, meaning &ldquo;to link things together&rdquo;, since it will print all the files whose names you give it, one after the other.)</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ cat ./seasonal/autumn.csv ./seasonal/spring.csv
Date,Tooth
2017-01-05,canine
2017-01-17,wisdom
2017-01-18,canine
2017-02-01,molar
Date,Tooth
2017-01-25,wisdom
2017-02-19,canine
2017-02-24,canine
2017-02-28,wisdom
</code></pre></td></tr></table>
</div>
</div><p>You can use <code>cat</code> to print large files and then scroll through the output. But there is a more powerful command called <code>less</code>. When you <code>less</code> a file, one page is displayed at a time; you can press spacebar to page down or type <code>q</code> to quit.</p>
<p>If you give <code>less</code> the names of several files, you can type <code>:n</code> (<code>shift</code>+<code>;</code>+<code>n</code>)to move to the next file, <code>:p</code> to go back to the previous one, or <code>:q</code> to quit.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ less seasonal/spring.csv seasonal/summer.csv
</code></pre></td></tr></table>
</div>
</div><h2 id="head"><code>head</code></h2>
<p>A quick way to figure out what a dataset contains is to look at the first few rows. We can do this in the shell using a command called <code>head</code>. As its name suggests, it prints the first 10 lines of a file, and if there aren&rsquo;t 10 lines in the file, <code>head</code> will display as many lines as there are. so the command:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ head seasonal/summer.csv
Date,Tooth
2017-01-11,canine
2017-01-18,wisdom
2017-01-21,bicuspid
2017-02-02,molar
2017-02-27,wisdom
2017-02-27,wisdom
2017-03-07,bicuspid
2017-03-15,wisdom
2017-03-20,canine
</code></pre></td></tr></table>
</div>
</div><p>One of the shell&rsquo;s power tools is <strong>tab completion</strong>. If you start typing the name of a file and then press the <code>tab</code> key, the shell will do its best to auto-complete the path. For example, if you type <code>sea</code> and press <code>tab</code>, it will fill in the directory name <code>seasonal/</code> (with a trailing slash). If you then type <code>a</code> and tab, it will complete the path as <code>seasonal/autumn.csv</code>. If the path is ambiguous, such as <code>seasonal/s</code>, pressing <code>tab</code> a <strong>second time</strong> will display a list of possibilities. Typing another character to make your path more specific and then pressing <code>tab</code> will fill in the rest of the name.</p>
<p>Shell lets you change head&rsquo;s behavior by giving it a command-line flag. If you run the command:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">head -n <span class="m">3</span> seasonal/summer.csv
</code></pre></td></tr></table>
</div>
</div><p>head will only display the first 3 lines of the file. If you run head <code>-n 100</code>, it will display the first 100 (assuming there are that many), and so on.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ head -n <span class="m">5</span> seasonal/winter.csv
Date,Tooth
2017-01-03,bicuspid
2017-01-05,incisor
2017-01-21,wisdom
2017-02-05,molar
</code></pre></td></tr></table>
</div>
</div><p>A flag&rsquo;s name usually indicates its purpose (for example, <code>-n</code> is meant to signal &ldquo;number of lines&rdquo;). Command flags don&rsquo;t have to be a <code>- &lt;a-single-letter&gt;</code>, but it&rsquo;s a widely-used convention. It&rsquo;s considered good style to put all flags before any filenames.</p>
<h2 id="ls-again"><code>ls</code> again</h2>
<p>In order to see everything underneath a directory, no matter how deeply nested it is, you can give <code>ls</code> the flag <code>-R</code> (which means &ldquo;recursive&rdquo;). Thus if you use <code>ls -R</code> in your home directory, it shows every file and directory in the current level, then everything in each sub-directory, and so on.</p>
<p>ls has another flag <code>-F</code> that prints a <code>/</code> after the name of every directory and a <code>*</code> after the name of every runnable program. You can run <code>ls</code> with the two flags at the same time, like <code>ls -R -F &lt;dir-name&gt;</code> (The order of the flags doesn&rsquo;t matter, but the directory name must come last.)</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ ls -R -F /home/repl
/home/repl:
backup/  bin/  course.txt  people/  seasonal/

/home/repl/backup:

/home/repl/bin:

/home/repl/people:
agarwal.txt

/home/repl/seasonal:
autumn.csv  spring.csv  summer.csv  winter.csv
</code></pre></td></tr></table>
</div>
</div><h2 id="man"><code>man</code></h2>
<p>To find out what commands do, people used to use the <code>man</code> command (short for &ldquo;<strong>manual</strong>&quot;). For example, the command <code>man head</code> brings up this information:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">HEAD<span class="o">(</span>1<span class="o">)</span>               BSD General Commands Manual              HEAD<span class="o">(</span>1<span class="o">)</span>

NAME
     head -- display first lines of a file

SYNOPSIS
     head <span class="o">[</span>-n count <span class="p">|</span> -c bytes<span class="o">]</span> <span class="o">[</span>file ...<span class="o">]</span>

DESCRIPTION
     This filter displays the first count lines or bytes of each of
     the specified files, or of the standard input <span class="k">if</span> no files are
     specified.  If count is omitted it defaults to 10.

     If more than a single file is specified, each file is preceded by
     a header consisting of the string <span class="sb">``</span><span class="o">==</span>&gt; XXX &lt;<span class="o">==</span><span class="s1">&#39;&#39;</span> where <span class="sb">``</span>XXX<span class="s1">&#39;&#39;</span>
     is the name of the file.

SEE ALSO
     tail<span class="o">(</span>1<span class="o">)</span>
</code></pre></td></tr></table>
</div>
</div><p><code>man</code> automatically invokes <code>less</code>, so you may need to press spacebar to page through the information and <code>:q</code> to quit.</p>
<p>The one-line description under <code>NAME</code> tells you briefly what the command does, and the summary under <code>SYNOPSIS</code> lists all the <strong>flags</strong> it understands. Anything that is <strong>optional</strong> is shown in square brackets <code>[...]</code>, <strong>either/or alternatives</strong> are separated by <code>|</code>, and things that can be <strong>repeated</strong> are shown by <code>...,</code> so <code>head</code>&rsquo;s manual page is telling you that you can either give a line count with <code>-n</code> or a byte count with <code>-c</code>, and that you can give it any number of filenames.</p>
<p>For example, when you tap <code>man tail</code>, shell returns the page:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">TAIL<span class="o">(</span>1<span class="o">)</span>                      General Commands Manual                     TAIL<span class="o">(</span>1<span class="o">)</span>

NAME
     tail ‚Äì display the last part of a file

SYNOPSIS
     tail <span class="o">[</span>-F <span class="p">|</span> -f <span class="p">|</span> -r<span class="o">]</span> <span class="o">[</span>-q<span class="o">]</span> <span class="o">[</span>-b number <span class="p">|</span> -c number <span class="p">|</span> -n number<span class="o">]</span> <span class="o">[</span>file ...<span class="o">]</span>

DESCRIPTION
     The tail utility displays the contents of file or, by default, its standard
     input, to the standard output.

     The display begins at a byte, line or 512-byte block location in the input.
     Numbers having a leading plus <span class="o">(</span>‚Äò+‚Äô<span class="o">)</span> sign are relative to the beginning of
     the input, <span class="k">for</span> example, ‚Äú-c +2‚Äù starts the display at the second byte of
     the input.  Numbers having a leading minus <span class="o">(</span>‚Äò-‚Äô<span class="o">)</span> sign or no explicit sign
     are relative to the end of the input, <span class="k">for</span> example, ‚Äú-n 2‚Äù displays the last
     two lines of the input.  The default starting location is ‚Äú-n 10‚Äù, or the
     last <span class="m">10</span> lines of the input.

     The options are as follows:

     -b number
</code></pre></td></tr></table>
</div>
</div><p>You can see that numbers having a leading plus (‚Äò<code>+</code>‚Äô) sign are relative to the beginning of the input.</p>
<h2 id="cut"><code>cut</code></h2>
<p><code>head</code> and <code>tail</code> let you select rows from a text file. If you want to select columns, you can use the command <code>cut</code>. It has several options (you can use <code>man cut</code> to explore them), but the most common is something like:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">cut -f 2-5,8 -d , values.csv
</code></pre></td></tr></table>
</div>
</div><p>which means &ldquo;select columns 2 through 5 and columns 8, using comma as the separator&rdquo;. <code>cut</code> uses <code>-f</code> (meaning &ldquo;fields&rdquo;) to specify columns and <code>-d</code> (meaning &ldquo;delimiter&rdquo;) to specify the separator. You need to specify the latter because some files may use spaces, tabs, or colons to separate columns.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ cat seasonal/spring.csv
Date,Tooth
2017-01-25,wisdom
2017-02-19,canine
2017-02-24,canine
2017-02-28,wisdom
2017-03-04,incisor
$
$ cut -f <span class="m">1</span> -d , seasonal/spring.csv
Date
2017-01-25
2017-02-19
2017-02-24
2017-02-28
2017-03-04
</code></pre></td></tr></table>
</div>
</div><p>You can just omit the space between flag and the number/delimiter, like <code>cut -d, -f1 seasonal/spring.csv</code></p>
<p>Notice that <code>cut</code> is a simple-minded command. In particular, it doesn&rsquo;t understand quoted strings. If, for example, your file is:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ cat everyone.csv
Name,Age
<span class="s2">&#34;Johel,Ranjit&#34;</span>,28
<span class="s2">&#34;Sharma,Rupinder&#34;</span>,26
</code></pre></td></tr></table>
</div>
</div><p>then you will get</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ cut -f <span class="m">2</span> -d , everyone.csv
Age
Ranjit<span class="s2">&#34;
</span><span class="s2">Rupinder&#34;</span>
</code></pre></td></tr></table>
</div>
</div><p>rather than everyone&rsquo;s age, because it will think the comma between last and first names is a column separator.</p>
<blockquote>
<p><code>paste</code> can be used to combine data files instead of cutting them up. you can set delimiter by flag <code>-d</code>, like <code>cut</code>.</p>
</blockquote>
<h2 id="re-run-commands">Re-run commands</h2>
<p>One of the biggest advantages of using the shell is that it makes it easy for you to do things over again. If you run some commands, you can then press the <code>up-arrow</code> key to cycle back through them. You can also use the <code>left-arrow</code> and <code>right-arrow</code> keys and the <code>delete</code> key to edit them. Pressing <code>enter</code> will then run the modified command.</p>
<p>Even better, <code>history</code> will print a list of commands you have run recently. Each one is preceded by a serial number to make it easy to re-run particular commands: just type <code>!55</code> to re-run the 55th command in your history (if you have that many). You can also re-run a command by typing an exclamation mark followed by the command&rsquo;s name, such as <code>!head</code> or <code>!cut</code>, which will re-run the most recent use of that command.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ head summer.csv
head: cannot open <span class="s1">&#39;summer.csv&#39;</span> <span class="k">for</span> reading: No such file or directory
$ <span class="nb">cd</span> seasonal/
$ !head
head summer.csv
Date,Tooth
2017-01-11,canine
2017-01-18,wisdom
2017-01-21,bicuspid
2017-02-02,molar
2017-02-27,wisdom
2017-02-27,wisdom
2017-03-07,bicuspid
2017-03-15,wisdom
2017-03-20,canine
$ <span class="nb">history</span>
    <span class="m">1</span>  head summer.csv
    <span class="m">2</span>  <span class="nb">cd</span> seasonal/
    <span class="m">3</span>  head summer.csv
    <span class="m">4</span>  <span class="nb">history</span>
$ !1
head summer.csv
Date,Tooth
2017-01-11,canine
2017-01-18,wisdom
2017-01-21,bicuspid
2017-02-02,molar
2017-02-27,wisdom
2017-02-27,wisdom
2017-03-07,bicuspid
2017-03-15,wisdom
2017-03-20,canine
</code></pre></td></tr></table>
</div>
</div><h2 id="grep"><code>grep</code></h2>
<p><code>head</code> and <code>tail</code> select rows, <code>cut</code> selects columns, and <code>grep</code> selects lines according to what they contain. In its simplest form, <code>grep</code> takes a piece of text followed by one or more filenames and prints all of the lines in those files that contain that text. For example, <code>grep bicuspid seasonal/winter.csv</code> prints lines from <code>winter.csv</code> that contain &ldquo;<code>bicuspid</code>&rdquo;.</p>
<p>There are some of <code>grep</code>&rsquo;s common flags:</p>
<p><code>-c</code>: print a count of matching lines rather than the lines themselves
<code>-h</code>: do not print the names of files when searching multiple files
<code>-i</code>: ignore case (e.g., treat &ldquo;Regression&rdquo; and &ldquo;regression&rdquo; as matches)
<code>-l</code>: print the names of files that contain matches, not the matches
<code>-n</code>: print line numbers for matching lines
<code>-v</code>: invert the match, i.e., only show lines that don&rsquo;t match.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ grep molar seasonal/autumn.csv
2017-02-01,molar
2017-05-25,molar
$
$ <span class="c1"># Invert the match to find all of the lines that don&#39;t contain the word molar in seasonal/spring.csv, and show their line numbers.</span>
$ grep -v -n molar seasonal/spring.csv
1:Date,Tooth
2:2017-01-25,wisdom
3:2017-02-19,canine
4:2017-02-24,canine
5:2017-02-28,wisdom
6:2017-03-04,incisor
7:2017-03-12,wisdom
8:2017-03-14,incisor
10:2017-04-29,wisdom
11:2017-05-08,canine
12:2017-05-20,canine
13:2017-05-21,canine
14:2017-05-25,canine
16:2017-06-13,bicuspid
17:2017-06-14,canine
18:2017-07-10,incisor
19:2017-07-16,bicuspid
20:2017-07-23,bicuspid
21:2017-08-13,bicuspid
22:2017-08-13,incisor
23:2017-08-13,wisdom
$
$ <span class="c1"># Count how many lines contain the word incisor in autumn.csv and winter.csv combined. </span>
$ grep -c incisor seasonal/autumn.csv seasonal/winter.csv
seasonal/autumn.csv:3
seasonal/winter.csv:6
</code></pre></td></tr></table>
</div>
</div><h1 id="combining-tools">Combining Tools</h1>
<h2 id="redirection">Redirection</h2>
<p>You can use <strong>redirection</strong> to save any command&rsquo;s output anywhere you want. If you run this command:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">head -n <span class="m">5</span> seasonal/summer.csv
</code></pre></td></tr></table>
</div>
</div><p>it prints the first 5 lines of the summer data on the screen. If you run this command instead:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">head -n <span class="m">5</span> seasonal/summer.csv &gt; top.csv
</code></pre></td></tr></table>
</div>
</div><p>nothing appears on the screen. Instead, head&rsquo;s output is put in a new file called <code>top.csv</code>. (It won&rsquo;t change the content of the original file <code>seasonal/summer.csv</code>)</p>
<p>The greater-than sign <code>&gt;</code> tells the shell to redirect head&rsquo;s output to a file. It isn&rsquo;t part of the head command; instead, it works with every shell command that produces output.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ tail -n5 seasonal/winter.csv
2017-07-17,canine
2017-08-10,incisor
2017-08-11,bicuspid
2017-08-11,wisdom
2017-08-13,canine
$ tail -n5 seasonal/winter.csv &gt; last.csv
$ tail -n5 seasonal/winter.csv
2017-07-17,canine
2017-08-10,incisor
2017-08-11,bicuspid
2017-08-11,wisdom
2017-08-13,canine
$ cat last.csv
2017-07-17,canine
2017-08-10,incisor
2017-08-11,bicuspid
2017-08-11,wisdom
2017-08-13,canine
</code></pre></td></tr></table>
</div>
</div><p>Suppose you want to get lines from the middle of a file. More specifically, suppose you want to get <strong>lines 3-5</strong> from one of our data files. You can start by using <code>head</code> to get the first 5 lines and <strong>redirect</strong> that to a file, and then use <code>tail</code> to select the last 3:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ head -n <span class="m">5</span> seasonal/winter.csv &gt; top.csv
$ tail -n <span class="m">3</span> top.csv
2017-01-05,incisor
2017-01-21,wisdom
2017-02-05,molar
</code></pre></td></tr></table>
</div>
</div><h2 id="pipe">Pipe</h2>
<p>Using redirection to combine commands has two drawbacks:</p>
<ul>
<li>It leaves a lot of intermediate files lying around (like top.csv).</li>
<li>The commands to produce your final result are scattered across several lines of history.</li>
</ul>
<p>The shell provides another tool that solves both of these problems at once called a <strong>pipe</strong>. For the previous example, instead of sending <code>head</code>&rsquo;s output to a file, add a vertical bar <code>|</code> and the <code>tail</code> command without a filename:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ head -n <span class="m">5</span> seasonal/summer.csv <span class="p">|</span> tail -n <span class="m">3</span>
2017-01-18,wisdom
2017-01-21,bicuspid
2017-02-02,molar
</code></pre></td></tr></table>
</div>
</div><p>The pipe symbol tells the shell to <strong>use the output of the command on the left as the input to the command on the right</strong>.</p>
<p>Now, use <code>cut</code> to select all of the tooth names from column 2 of the comma delimited file <code>seasonal/summer.csv</code>, then pipe the result to <code>grep</code>, with an inverted match, to exclude the header line containing the word &ldquo;Tooth&rdquo;. This completes the <strong>slicing</strong> of the table in Shell.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ cut -f2 -d, seasonal/summer.csv <span class="p">|</span> grep -v Tooth
canine
wisdom
bicuspid
molar
wisdom
wisdom
bicuspid
wisdom
canine
molar
bicuspid
wisdom
canine
canine
incisor
incisor
canine
incisor
incisor
incisor
canine
canine
bicuspid
canine
</code></pre></td></tr></table>
</div>
</div><p>You can chain any number of commands together. For example :</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ cut -d , -f <span class="m">1</span> seasonal/spring.csv <span class="p">|</span> grep -v Date <span class="p">|</span> head -n <span class="m">10</span>
2017-01-25
2017-02-19
2017-02-24
2017-02-28
2017-03-04
2017-03-12
2017-03-14
2017-03-21
2017-04-29
2017-05-08
</code></pre></td></tr></table>
</div>
</div><h2 id="wc"><code>wc</code></h2>
<p>The command <code>wc</code> (short for &ldquo;<strong>word count</strong>&quot;) prints the number of characters (<code>-c</code>), words (<code>-w</code>), and lines (<code>-l</code>) in a file, you can make it print only one of these at one time.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ grep 2017-07 seasonal/spring.csv
2017-07-10,incisor
2017-07-16,bicuspid
2017-07-23,bicuspid
$ grep 2017-07 seasonal/spring.csv <span class="p">|</span> wc -l
<span class="m">3</span>
$ <span class="c1"># You can also make this by grep&#39;s option -c</span>
$ grep -c 2017-07 seasonal/spring.csv
<span class="m">3</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="wildcards">Wildcards</h2>
<p>Most shell commands will work on multiple files if you give them multiple filenames. For example, you can get the first column from all of the seasonal data files at once like this:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">cut -d , -f <span class="m">1</span> seasonal/winter.csv seasonal/spring.csv seasonal/summer.csv seasonal/autumn.csv
</code></pre></td></tr></table>
</div>
</div><p>But typing the names of many files over and over is a bad idea: it wastes time, and sooner or later you will either leave a file out or repeat a file&rsquo;s name. To make your life better, the shell allows you to use <strong>wildcards</strong> to specify a list of files with a single expression. The most common wildcard is <code>*</code>, which means &ldquo;<strong>match zero or more characters</strong>&rdquo;. Using it, we can shorten the cut command above to this:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">cut -d , -f <span class="m">1</span> seasonal/*
</code></pre></td></tr></table>
</div>
</div><p>If you only want to select the CSV file, then</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">cut -d , -f <span class="m">1</span> seasonal/*.csv
</code></pre></td></tr></table>
</div>
</div><p>Using head to get the first three lines from both <code>seasonal/spring.csv</code> and <code>seasonal/summer.csv</code>, a total of six lines of data:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ <span class="c1"># ------- Example ------- #</span>
$ head -n3 seasonal/s*
<span class="o">==</span>&gt; seasonal/spring.csv &lt;<span class="o">==</span>
Date,Tooth
2017-01-25,wisdom
2017-02-19,canine

<span class="o">==</span>&gt; seasonal/summer.csv &lt;<span class="o">==</span>
Date,Tooth
2017-01-11,canine
2017-01-18,wisdom
</code></pre></td></tr></table>
</div>
</div><p>The shell has other wildcards as well:</p>
<ul>
<li><code>?</code> matches a single character, so <code>201?.txt</code> will match <code>2017.txt</code> or <code>2018.txt</code>, but not <code>2017-01.txt</code>.</li>
<li><code>[...]</code> matches any one of the characters inside the square brackets, so <code>201[78].txt</code> matches <code>2017.txt</code> or <code>2018.txt</code>, but not <code>2016.txt</code>.</li>
<li><code>{...}</code> matches any of the comma-separated patterns inside the curly brackets, so <code>{*.txt, *.csv}</code> matches any file whose name ends with <code>.txt</code> or <code>.csv</code>, but not files whose names end with <code>.pdf</code>.</li>
</ul>
<h2 id="sort"><code>sort</code></h2>
<p><code>sort</code> puts data in order. By default it does this in <strong>ascending alphabetical order</strong>, but the flags</p>
<p><code>-n</code> can sort <strong>numerically</strong>,
<code>-r</code> can <strong>reverse</strong> the order of its output,
<code>-b</code> tells it to <strong>ignore leading blanks</strong>
<code>-f</code> tells it to <strong>fold case</strong> (i.e., be case-insensitive).</p>
<p>Pipelines often use <code>grep</code> to get rid of unwanted records and then <code>sort</code> to put the remaining records in order.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ cut -d , -f <span class="m">2</span> seasonal/winter.csv <span class="p">|</span> grep -v Tooth <span class="p">|</span> sort -r
wisdom
wisdom
wisdom
wisdom
molar
molar
molar
molar
incisor
incisor
incisor
incisor
incisor
incisor
canine
canine
canine
canine
canine
canine
canine
bicuspid
bicuspid
bicuspid
bicuspid
</code></pre></td></tr></table>
</div>
</div><h2 id="uniq"><code>uniq</code></h2>
<p>Another command that is often used with <code>sort</code> is <code>uniq</code>, whose job is to <strong>remove adjacent duplicated lines</strong>. If a file contains:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ cat test.txt
2017-07-07
2017-07-08
2017-07-09
2017-07-07
2017-07-07
</code></pre></td></tr></table>
</div>
</div><p>then</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ uniq test.txt
2017-07-07
2017-07-08
2017-07-09
2017-07-07
$
$ sort test.txt <span class="p">|</span> uniq
2017-07-07
2017-07-08
2017-07-09
</code></pre></td></tr></table>
</div>
</div><p><code>uniq</code> is built to work with <strong>very large</strong> files. In order to remove non-adjacent lines from a file, it would have to keep the whole file in memory. By only removing adjacent duplicates, it only has to keep the most recent unique line in memory.</p>
<p>You can use <code>uniq -c</code> to display unique lines with a count of how often each occurs rather than using <code>uniq</code> and <code>wc</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ cut -d , -f <span class="m">2</span> seasonal/winter.csv <span class="p">|</span> grep -v Tooth <span class="p">|</span> sort <span class="p">|</span> uniq -c
	<span class="m">4</span> bicuspid
	<span class="m">7</span> canine
	<span class="m">6</span> incisor
	<span class="m">4</span> molar
	<span class="m">4</span> wisdom
</code></pre></td></tr></table>
</div>
</div><h2 id="save">Save</h2>
<p>The shell lets us redirect the output of a sequence of piped commands:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">cut -d , -f <span class="m">2</span> seasonal/*.csv <span class="p">|</span> grep -v Tooth &gt; teeth-only.txt
</code></pre></td></tr></table>
</div>
</div><p>However, <code>&gt;</code> must appear at the end of the pipeline: if we try to use it in the middle, like following commands, then all of the output from <code>cut</code> is written to <code>teeth-only.txt</code>, so there is nothing left for <code>grep</code> and it waits forever for some input.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ cut -d , -f <span class="m">2</span> seasonal/*.csv <span class="p">|</span> sort <span class="p">|</span> uniq -c <span class="p">|</span> grep -v Tooth &gt; save1.txt
$ cut -d , -f <span class="m">2</span> seasonal/*.csv <span class="p">|</span> sort <span class="p">|</span> uniq -c &gt; save2.txt <span class="p">|</span> grep -v Tooth
$ cat save1.txt
     <span class="m">15</span> bicuspid
     <span class="m">31</span> canine
     <span class="m">18</span> incisor
     <span class="m">11</span> molar
     <span class="m">17</span> wisdom
$ cat save2.txt
      <span class="m">4</span> Tooth
     <span class="m">15</span> bicuspid
     <span class="m">31</span> canine
     <span class="m">18</span> incisor
     <span class="m">11</span> molar
     <span class="m">17</span> wisdom
</code></pre></td></tr></table>
</div>
</div><p>Furthermore, if we put redirection at the front of a pipeline or just behind the first command, the command&rsquo;s output is redirected to the file and all other commands will be ignored.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ cut -d , -f <span class="m">2</span> seasonal/*.csv &gt; save3.txt <span class="p">|</span> sort <span class="p">|</span> uniq -c <span class="p">|</span> grep -v Tooth
$ &gt; save4.txt cut -d , -f <span class="m">2</span> seasonal/*.csv <span class="p">|</span> sort <span class="p">|</span> uniq -c <span class="p">|</span> grep -v Tooth
$ &gt; save5.txt cut -d , -f <span class="m">2</span> seasonal/*.csv
$ cut -d , -f <span class="m">2</span> seasonal/*.csv &gt; save6.txt
$ wc -c save<span class="o">[</span>3456<span class="o">]</span>*
 <span class="m">705</span> save3.txt
 <span class="m">705</span> save4.txt
 <span class="m">705</span> save5.txt
 <span class="m">705</span> save6.txt
<span class="m">2820</span> total
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>Some tasks will take minutes, hours, or even days to complete. You may also make some mistakes causing it to hang up. If you decide to kill the program, you can type <code>Ctrl + c</code> (<code>^c</code>) to end it.</p>
</blockquote>
<h1 id="batch-processing">Batch processing</h1>
<h2 id="information-storage---variables">Information storage - variables</h2>
<h3 id="environment-variables">Environment variables</h3>
<p>Like other programs, the shell stores information in variables. Some of these, called <strong>environment variables, are available all the time</strong>. Environment variables' names are conventionally written in <strong>upper-case</strong>. There are some commonly-used ones:</p>
<p><img src="https://raw.githubusercontent.com/floating15/img/main/202204131338646.png"
	
	
	
	loading="lazy"
	
	
></p>
<p>To get a complete list (which is quite long), you can type <code>set</code> in the shell.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ <span class="nb">set</span> <span class="p">|</span> grep HISTFILESIZE
<span class="nv">HISTFILESIZE</span><span class="o">=</span><span class="m">2000</span>
</code></pre></td></tr></table>
</div>
</div><p>A simpler way to find a variable&rsquo;s value is to use a command called <code>echo</code>, which prints its arguments.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ <span class="nb">echo</span> abc
abc
</code></pre></td></tr></table>
</div>
</div><p>If you try to use it to print a variable&rsquo;s value like following command, it will print the variable&rsquo;s <strong>name</strong> (instead of value), USER.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ <span class="nb">echo</span> USER
USER
</code></pre></td></tr></table>
</div>
</div><p>To get the variable&rsquo;s <strong>value</strong>, you must put a dollar sign <code>$</code> in front of it.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ <span class="nb">echo</span> <span class="nv">$USER</span>
repl
$ <span class="nb">echo</span> <span class="nv">$HISTFILESIZE</span>
<span class="m">2000</span>
</code></pre></td></tr></table>
</div>
</div><p>This is true everywhere: to get the value of a variable called <code>X</code>, you must write <code>$X</code>. (This is so that the shell can tell whether you mean &ldquo;a file named <code>X</code>&rdquo; or &ldquo;the value of a variable named <code>X</code>&rdquo;.)</p>
<h3 id="shell-variable">Shell variable</h3>
<p>The other kind of variable is called a <strong>shell variable</strong>, which is like a local variable in a programming language. To create a shell variable, you simply assign a value to a name:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ <span class="nv">training</span><span class="o">=</span>seasonal/summer.csv
</code></pre></td></tr></table>
</div>
</div><p>without any spaces before or after the <code>=</code> sign. Once you have done this, you can check the variable&rsquo;s value with:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ <span class="nb">echo</span> <span class="nv">$training</span>
seasonal/summer.csv
</code></pre></td></tr></table>
</div>
</div><p>By defining shell variables, we can access frequently used files more efficiently:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ <span class="nv">testing</span><span class="o">=</span>seasonal/winter.csv
$ head -n1 <span class="nv">$testing</span>
Date,Tooth
</code></pre></td></tr></table>
</div>
</div><h2 id="loop-commands">Loop commands</h2>
<h3 id="intro">intro</h3>
<p>Shell variables are also used in loops, which repeat commands many times. For example:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ <span class="k">for</span> filetype in gif jpg png<span class="p">;</span> <span class="k">do</span> <span class="nb">echo</span> <span class="nv">$filetype</span><span class="p">;</span> <span class="k">done</span>
gif
jpg
png
</code></pre></td></tr></table>
</div>
</div><p>The structure of loop is:</p>
<p><code>for</code> ‚Ä¶variable‚Ä¶ <code>in</code> ‚Ä¶list‚Ä¶ <code>; do</code> ‚Ä¶body‚Ä¶ <code>; done</code></p>
<p>Notice that the body uses <code>$filetype</code> to get the variable&rsquo;s value instead of just filetype, just like it does with any other shell variable. Also notice where the semi-colons <code>;</code> go: the first one comes between the list and the keyword <code>do</code>, and the second comes between the body and the keyword <code>done</code>.</p>
<p>You can always type in the names of the files you want to process when writing the loop, but it&rsquo;s usually better to use wildcards.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ <span class="k">for</span> filename in seasonal/*.csv<span class="p">;</span> <span class="k">do</span> <span class="nb">echo</span> <span class="nv">$filename</span><span class="p">;</span> <span class="k">done</span>
seasonal/autumn.csv
seasonal/spring.csv
seasonal/summer.csv
seasonal/winter.csv
</code></pre></td></tr></table>
</div>
</div><p>The shell expands <code>seasonal/*.csv</code> to be a list of four filenames before it runs the loop.</p>
<p>You can also add pipe behind the keyword <code>done</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ <span class="k">for</span> filename in seasonal/*.csv<span class="p">;</span> <span class="k">do</span> <span class="nb">echo</span> <span class="nv">$filename</span><span class="p">;</span> <span class="k">done</span> <span class="p">|</span> sort -r
seasonal/winter.csv
seasonal/summer.csv
seasonal/spring.csv
seasonal/autumn.csv
</code></pre></td></tr></table>
</div>
</div><p>You can <strong>set a variable using a wildcard expression to record a list of filenames</strong>. For example, if you define a variable <code>datasets</code>, you can display the files' names:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ <span class="nv">datasets</span><span class="o">=</span>seasonal/*.csv
$ <span class="k">for</span> filename in <span class="nv">$datasets</span><span class="p">;</span> <span class="k">do</span> <span class="nb">echo</span> <span class="nv">$filename</span><span class="p">;</span> <span class="k">done</span>
seasonal/autumn.csv
seasonal/spring.csv
seasonal/summer.csv
seasonal/winter.csv
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>DO NOT forget the <code>$</code> before the variable!!</p>
</blockquote>
<h3 id="pipeline-in-loop">pipeline in loop</h3>
<p>Printing filenames is useful for debugging, but the real <strong>purpose of loops is to do things with multiple files</strong>. This loop prints the second line of each data file:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ <span class="k">for</span> file in seasonal/*.csv<span class="p">;</span> <span class="k">do</span> head -n <span class="m">2</span> <span class="nv">$file</span> <span class="p">|</span> tail -n 1<span class="p">;</span> <span class="k">done</span>
2017-01-05,canine
2017-01-25,wisdom
2017-01-11,canine
2017-01-03,bicuspid
</code></pre></td></tr></table>
</div>
</div><p>In this case, the body is a pipeline of two commands instead of a single command.</p>
<p>Write a loop that prints the last entry from July 2017 (2017-07) in every seasonal file:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ <span class="k">for</span> file in seasonal/*.csv<span class="p">;</span> <span class="k">do</span> grep 2017-07 <span class="nv">$file</span> <span class="p">|</span> tail -n1<span class="p">;</span> <span class="k">done</span>
2017-07-21,bicuspid
2017-07-23,bicuspid
2017-07-25,canine
2017-07-17,canine
</code></pre></td></tr></table>
</div>
</div><h3 id="multi-command-in-loop">multi-command in loop</h3>
<p>The loops you have seen so far all have a single command or pipeline in their body, but a loop can contain any number of commands. To tell the shell where one ends and the next begins, you must separate them with semi-colons, that is
the structure of loop should be:</p>
<p><code>for</code> ‚Ä¶variable‚Ä¶ <code>in</code> ‚Ä¶list‚Ä¶ <code>; do</code> ‚Ä¶body1‚Ä¶ <code>;</code> ‚Ä¶body2‚Ä¶ <code>; done</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ <span class="k">for</span> f in seasonal/*.csv<span class="p">;</span> <span class="k">do</span> <span class="nb">echo</span> <span class="nv">$f</span><span class="p">;</span> head -n <span class="m">2</span> <span class="nv">$f</span> <span class="p">|</span> tail -n 1<span class="p">;</span> <span class="k">done</span>
seasonal/autumn.csv
2017-01-05,canine
seasonal/spring.csv
2017-01-25,wisdom
seasonal/summer.csv
2017-01-11,canine
seasonal/winter.csv
2017-01-03,bicuspid
</code></pre></td></tr></table>
</div>
</div><h2 id="tips">Tips</h2>
<p>You should not use <code>space</code> in filename. It&rsquo;s easy and sensible to give files multi-word names like <code>July 2017.csv</code> when you are using a graphical file explorer. However, this causes problems when you are working in the shell. For example, suppose you wanted to rename <code>July 2017.csv</code> to be <code>2017 July data.csv</code>. You cannot type:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">mv July 2017.csv <span class="m">2017</span> July data.csv
</code></pre></td></tr></table>
</div>
</div><p>because it looks to the shell as though you are trying to move four files called <code>July</code>, <code>2017.csv</code>, <code>2017</code>, and <code>July</code> (again) into a directory called <code>data.csv</code>. Instead, you have to quote the files' names so that the shell treats each one as a single parameter:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">mv <span class="s1">&#39;July 2017.csv&#39;</span> <span class="s1">&#39;2017 July data.csv&#39;</span>
</code></pre></td></tr></table>
</div>
</div><h1 id="creating-new-tools">Creating New Tools</h1>
<h2 id="edit-a-file">Edit a file</h2>
<p>Unix has a bewildering variety of text editors. We will use a simple one called <code>nano</code>. If you type <code>nano filename</code>, it will open <code>filename</code> for editing (or create it if it doesn&rsquo;t already exist). You can move around with the <code>arrow-keys</code>, delete characters using <code>backspace</code>, and do other operations with <code>control-key</code> combinations:</p>
<p><code>Ctrl</code> + <code>K</code>: delete a line.
<code>Ctrl</code> + <code>U</code>: un-delete a line.
<code>Ctrl</code> + <code>O</code>: save the file (&lsquo;O&rsquo; stands for &lsquo;output&rsquo;). You will also need to press Enter to confirm the filename!
<code>Ctrl</code> + <code>X</code>: exit the editor.</p>
<blockquote>
<p>As a reminder, to save what you have written in <code>nano</code>, type <code>Ctrl</code> + <code>O</code> to write the file out, then <code>Enter</code> to confirm the filename, then <code>Ctrl</code> + <code>X</code> to exit the editor.</p>
</blockquote>
<p>Actually, We can also edit a file roughly by <strong>redirecting</strong> the output of <strong><code>echo</code></strong>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ <span class="nb">echo</span> <span class="s1">&#39;head -n 1 seasonal/*.csv&#39;</span> &gt; header.sh  
$ cat header.sh  
head -n <span class="m">1</span> seasonal/*.csv
$ bash header.sh
<span class="o">==</span>&gt; seasonal/autumn.csv &lt;<span class="o">==</span>
Date,Tooth

<span class="o">==</span>&gt; seasonal/spring.csv &lt;<span class="o">==</span>
Date,Tooth

<span class="o">==</span>&gt; seasonal/summer.csv &lt;<span class="o">==</span>
Date,Tooth

<span class="o">==</span>&gt; seasonal/winter.csv &lt;<span class="o">==</span>
Date,Tooth
</code></pre></td></tr></table>
</div>
</div><h2 id="store-and-bash-commands">Store and <code>bash</code> commands</h2>
<p>When you are doing a complex analysis, you will often want to keep a record of by following steps:</p>
<ol>
<li>Run <code>history</code>.</li>
<li>Pipe its output to <code>tail</code>.</li>
<li>Redirect that to a file.</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ <span class="nb">history</span> <span class="p">|</span> tail -n <span class="m">1000</span> &gt; ~/Documents/history_command.txt
$
$ head -n <span class="m">5</span> ~/Documents/history_command.txt
 <span class="m">1018</span>  <span class="nb">echo</span> 2017-07-07 &gt; test.txt
 <span class="m">1019</span>  2017-07-08 &gt;&gt; test.txt
 <span class="m">1020</span>  <span class="nb">echo</span> 2017-07-08 &gt;&gt; test.txt<span class="se">\n</span>echo 2017-07-09 &gt;&gt; test.txt<span class="se">\n</span>echo 2017-07-07 &gt;&gt; test.txt<span class="se">\n</span>echo 2017-07-07 &gt;&gt; test.txt
 <span class="m">1021</span>  cat test.txt
 <span class="m">1022</span>  uniq test.txt
</code></pre></td></tr></table>
</div>
</div><p>Since the commands you type in are just text, you can store them in files for the shell to run over and over again. To start exploring this powerful capability, <strong>Use <code>nano header.sh</code> to create a file called <code>header.sh</code> that contains this command</strong>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">head -n <span class="m">1</span> seasonal/*.csv
</code></pre></td></tr></table>
</div>
</div><p>This command selects the first row from each of the CSV files in the seasonal directory. <strong>Once you want to run this command, you can call it by <code>bash</code></strong>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">bash header.sh
</code></pre></td></tr></table>
</div>
</div><h2 id="shell-script">Shell script</h2>
<p>A file full of shell commands is called a <strong>shell script</strong>, or sometimes just a &ldquo;script&rdquo; for short. Scripts don&rsquo;t have to have names ending in <code>.sh</code>, but we will will use that convention to keep track of which files are scripts.</p>
<p>Scripts can also contain pipes. For example, if <code>all-dates.sh</code> contains this line:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">cut -d , -f <span class="m">1</span> seasonal/*.csv <span class="p">|</span> grep -v Date <span class="p">|</span> sort <span class="p">|</span> uniq
</code></pre></td></tr></table>
</div>
</div><p>then:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">bash all-dates.sh &gt; dates.out
</code></pre></td></tr></table>
</div>
</div><p>will extract the unique dates from the seasonal data files and save them in <code>dates.out</code>.</p>
<h3 id="pass-parameters">pass parameters</h3>
<p>A script that processes <strong>specific</strong> files is useful as a record of what you did, but one that allows you to process any files you want is more useful. To support this, you can use the special expression <code>$@</code> to mean &ldquo;<strong>all of the command-line parameters given to the script</strong>&rdquo;.</p>
<p>For example, if <code>unique-lines.sh</code> contains <code>sort $@ | uniq</code>, when you run:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">bash unique-lines.sh seasonal/summer.csv
</code></pre></td></tr></table>
</div>
</div><p>the shell <strong>replaces <code>$@</code> with <code>seasonal/summer.csv</code></strong> and processes one file. If you run this:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">bash unique-lines.sh seasonal/summer.csv seasonal/autumn.csv
</code></pre></td></tr></table>
</div>
</div><p>it processes two data files, and so on.</p>
<p>As well as <code>$@</code>, the shell lets you use <code>$1</code>, <code>$2</code>, and so on to refer to specific command-line parameters. You can use this to write commands that feel simpler or more natural than the shell&rsquo;s.</p>
<p>For example, you can create a script called <code>column.sh</code> that selects a single column from a CSV file when the user provides the <strong>filename as the first parameter and the column as the second</strong>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">cut -d , -f <span class="nv">$2</span> <span class="nv">$1</span>
</code></pre></td></tr></table>
</div>
</div><p>and then run it using:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">bash column.sh seasonal/autumn.csv <span class="m">1</span>
</code></pre></td></tr></table>
</div>
</div><p>Notice how the script uses the two parameters in reverse order.</p>
<p>The script <code>get-field.sh</code> contains:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">head -n <span class="nv">$2</span> <span class="nv">$1</span> <span class="p">|</span> tail -n <span class="m">1</span> <span class="p">|</span> cut -d , -f <span class="nv">$3</span>
</code></pre></td></tr></table>
</div>
</div><p>thus</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">bash get-field.sh seasonal/summer.csv <span class="m">4</span> <span class="m">2</span>
</code></pre></td></tr></table>
</div>
</div><p>select the second field from line 4 of <code>seasonal/summer.csv</code>.</p>
<h3 id="multi-line-script">multi-line script</h3>
<p>Our shells scripts so far have had a single command or pipe, but a script can contain many lines of commands. For example, you can create one that tells you how many records are in the shortest and longest of your data files, i.e., the range of your datasets' lengths. Write the following commands in to <code>range.sh</code> by <code>nano</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">wc -l <span class="nv">$@</span> <span class="p">|</span> grep -v total <span class="p">|</span> sort -n <span class="p">|</span> head -n <span class="m">1</span>
wc -l <span class="nv">$@</span> <span class="p">|</span> grep -v total <span class="p">|</span> sort -n -r <span class="p">|</span> head -n <span class="m">1</span>
</code></pre></td></tr></table>
</div>
</div><p>then</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ bash range.sh seasonal/*.csv &gt; range.out
$ cat range.out
  <span class="m">21</span> seasonal/autumn.csv
  <span class="m">26</span> seasonal/winter.csv
</code></pre></td></tr></table>
</div>
</div><p>Shell scripts can also contain <strong>loops</strong>. You can <strong>write them using semi-colons, or split them across lines without semi-colons</strong> to make them more readable. Define script <code>date-range.sh</code> containing the following commands, by <code>nano</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># Print the first and last data records of each file.</span>
<span class="k">for</span> filename in <span class="nv">$@</span>
<span class="k">do</span>
    cut -d, -f1 <span class="nv">$filename</span> <span class="p">|</span> grep -v Date <span class="p">|</span> sort <span class="p">|</span> head -n1
    cut -d, -f1 <span class="nv">$filename</span> <span class="p">|</span> grep -v Date <span class="p">|</span> sort <span class="p">|</span> tail -n1
<span class="k">done</span>
</code></pre></td></tr></table>
</div>
</div><p>(You don&rsquo;t have to indent the commands inside the loop, but doing so makes things clearer.)</p>
<blockquote>
<p>Comments in shell start with the <code>#</code> character and run to the end of the line.</p>
</blockquote>
<p>Call the script:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ bash date-range.sh seasonal/*.csv
2017-01-05
2017-08-16
2017-01-25
2017-09-07
2017-01-11
2017-08-04
2017-01-03
2017-08-13
$ bash date-range.sh seasonal/*.csv <span class="p">|</span> sort
2017-01-03
2017-01-05
2017-01-11
2017-01-25
2017-08-04
2017-08-13
2017-08-16
2017-09-07
</code></pre></td></tr></table>
</div>
</div><p>A common mistake in shell scripts (and interactive commands) is to put filenames in the wrong place. If you type:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">tail -n <span class="m">3</span>
</code></pre></td></tr></table>
</div>
</div><p>then since <code>tail</code> hasn&rsquo;t been given any filenames, it waits to read input from your keyboard. This means that if you type:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">head -n <span class="m">5</span> <span class="p">|</span> tail -n <span class="m">3</span> somefile.txt
</code></pre></td></tr></table>
</div>
</div><p>then <code>tail</code> <strong>goes ahead</strong> and prints the last three lines of <code>somefile.txt</code>, but <code>head</code> waits <strong>forever</strong> for keyboard input, since it wasn&rsquo;t given a filename and there isn&rsquo;t anything ahead of it in the pipeline.</p>
<hr>
<p>‰∏ãÈù¢ÊòØÈöêËóèÂÜÖÂÆπ:</p>
<p>ÊàëÂ§ßÊ¶ÇËä±Ë¥π‰∫Ü 4~5 ‰∏™Â∞èÊó∂ÂÆåÊàê‰∫ÜËøôÁØáÂçöÂÆ¢, ‰ΩÜÊòØ‰ª§‰∫∫Â¥©Ê∫ÉÁöÑÊòØÂç≥‰ΩøÊàëÂ∑≤ÁªèÁÇπÂáª‰øùÂ≠ò, ‰ΩÜÊòØÂú®ÊàëÊâìÁÆó‰∏ä‰º†ËØ•ÂçöÂÆ¢ÁöÑÊó∂ÂÄôÁ™ÅÁÑ∂ÂèëÁé∞Êú¨Êñá 95% ÁöÑÂÜÖÂÆπÈÉΩÊ≤°Êúâ‰øùÂ≠ò! Â¶ÇÊûú‰∏çÊòØÊàëÂøÉÊÄÅÂ•ΩÂèØËÉΩÁõ¥Êé•ÊäΩËøáÂéª. Âú®Ë∞∑Ê≠åÊêú‰∫ÜÂçäÂ§©‰πüÊ≤°ÊúâÊúâÊïàÁöÑËß£ÂÜ≥ÊñπÊ°à, ‰ΩÜÊòØÁªèËøá‰∏çÊñ≠Êë∏Á¥¢, ÊàëÂèëÁé∞‰∫Ü <code>/Users/wanghaoming/Library/Application Support/Code/User/History</code> Ëøô‰∏™ÂêçÁß∞Â∏¶ÊúâÊõôÂÖâÁöÑÁõÆÂΩï, ÁÇπÂáªËøõÂéª, Êåâ‰øÆÊîπÊó∂Èó¥ÊéíÂ∫è, ÈÄê‰∏™ÊéíÊü•, ÊâæÂà∞ËøôÁØáÂçöÂÆ¢ÁöÑÈ°πÁõÆÁõÆÂΩï <code>History/-39560499</code>. ÁÇπÂáªËøõÂéª, ÊåâÊñá‰ª∂Â§ßÂ∞èÊéíÂ∫è, Á¨¨‰∏Ä‰∏™Â∞±ÊòØËøô‰∏™ÊñáÊ°£, ËøôÊòØÊ≠§ËΩÆÂêâÊûóÊñ∞ÂÜ†Áñ´ÊÉÖÂ∞ÅÂüé 40 Â§©‰∏≠ÂîØ‰∏Ä‰ª§ÊàëÊøÄÂä®ÁöÑÂ•ΩÊ∂àÊÅØ! ÊúÄÂêéÂ§ßÂêàÂΩ±:</p>
<p><img src="https://raw.githubusercontent.com/floating15/img/main/202204132246717.png"
	
	
	
	loading="lazy"
	
	
></p>
<p>By the way, Âã§Â§á‰ªΩÁúüÁöÑÊòØ‰∏™Â•Ω‰π†ÊÉØ. ÁªèËøáËøô‰ª∂‰∫ã, ÊàëÊääÂ∞òÂ∞ÅÂ§öÂπ¥ÁöÑÂ∏åÊç∑Á°¨ÁõòÁøªÂá∫Êù•Ëøû‰∏ä Time Machine ‰∫Ü.</p>
<p>ÁéãÊµ©Èì≠
2022 Âπ¥ 4 Êúà 13 Êó• 22 Êó∂ 48 ÂàÜ
ÂêâÊûóÁúÅ, ÂêâÊûóÂ∏Ç</p>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/shell/">Shell</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
        <link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css"integrity="sha384-RZU/ijkSsFbcmivfdRBQDtwuwVqK7GMOw6IMvKyeWL2K5UAlyp6WonmB8m7Jd0Hn"crossorigin="anonymous"
            ><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.js"integrity="sha384-pK1WpvzWVBQiP0/GjnvRxV4mOb0oxFuyRxJlk6vVw146n3egcN5C925NCP7a7BY8"crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/contrib/auto-render.min.js"integrity="sha384-vZTG03m&#43;2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl"crossorigin="anonymous"
                defer
                >
            </script><script>
    window.addEventListener("DOMContentLoaded", () => {
        renderMathInElement(document.querySelector(`.article-content`), {
            delimiters: [
                { left: "$$", right: "$$", display: true },
                { left: "$", right: "$", display: false },
                { left: "\\(", right: "\\)", display: false },
                { left: "\\[", right: "\\]", display: true }
            ]
        });})
</script>
    
</article>

    

    

<aside class="related-contents--wrapper">
    <h2 class="section-title">Related contents</h2>
    <div class="related-contents">
        <div class="flex article-list--tile">
            
                
<article class="">
    <a href="/p/linux-operation-system-i-terminal/">
        
        

        <div class="article-details">
            <h2 class="article-title">Linux Operation System I (Terminal)</h2>
        </div>
    </a>
</article>
            
        </div>
    </div>
</aside>

     
    
        
    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2020 - 
        
        2022 Haoming Wang
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        Theme <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.11.0">Stack</a></b> designed by <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a>
    </section>

</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css"integrity="sha256-c0uckgykQ9v5k&#43;IqViZOZKc47Jn7KQil4/MP3ySA3F8="crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css"integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE="crossorigin="anonymous"
            >

            </main>
    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">Table of contents</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#manipulating-files-and-directories">Manipulating files and directories</a>
      <ol>
        <li><a href="#interface">Interface</a></li>
        <li><a href="#pwd"><code>pwd</code></a></li>
        <li><a href="#ls"><code>ls</code></a></li>
        <li><a href="#cd"><code>cd</code></a></li>
        <li><a href="#special-path">special path</a></li>
        <li><a href="#cp"><code>cp</code></a></li>
        <li><a href="#mv"><code>mv</code></a></li>
        <li><a href="#rm"><code>rm</code></a></li>
      </ol>
    </li>
    <li><a href="#manipulating-data">Manipulating Data</a>
      <ol>
        <li><a href="#cat-less"><code>cat</code>, <code>less</code></a></li>
        <li><a href="#head"><code>head</code></a></li>
        <li><a href="#ls-again"><code>ls</code> again</a></li>
        <li><a href="#man"><code>man</code></a></li>
        <li><a href="#cut"><code>cut</code></a></li>
        <li><a href="#re-run-commands">Re-run commands</a></li>
        <li><a href="#grep"><code>grep</code></a></li>
      </ol>
    </li>
    <li><a href="#combining-tools">Combining Tools</a>
      <ol>
        <li><a href="#redirection">Redirection</a></li>
        <li><a href="#pipe">Pipe</a></li>
        <li><a href="#wc"><code>wc</code></a></li>
        <li><a href="#wildcards">Wildcards</a></li>
        <li><a href="#sort"><code>sort</code></a></li>
        <li><a href="#uniq"><code>uniq</code></a></li>
        <li><a href="#save">Save</a></li>
      </ol>
    </li>
    <li><a href="#batch-processing">Batch processing</a>
      <ol>
        <li><a href="#information-storage---variables">Information storage - variables</a></li>
        <li><a href="#loop-commands">Loop commands</a></li>
        <li><a href="#tips">Tips</a></li>
      </ol>
    </li>
    <li><a href="#creating-new-tools">Creating New Tools</a>
      <ol>
        <li><a href="#edit-a-file">Edit a file</a></li>
        <li><a href="#store-and-bash-commands">Store and <code>bash</code> commands</a></li>
        <li><a href="#shell-script">Shell script</a></li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js"integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

<script
    src="https://cdn.jsdelivr.net/gh/zhixuan2333/gh-blog@v0.1.0/js/ribbon.min.js"
    integrity="sha384-UEK8ZiP3VgFNP8KnKMKDmd4pAUAOJ59Y2Jo3ED2Z5qKQf6HLHovMxq7Beb9CLPUe"
    crossorigin="anonymous"
    size="300"
    alpha="0.6"
    zindex="-1"
    defer
></script>


    </body>
</html>
